import{d as j,u as M,r as u,c as p,o as R,s as f,w,a as i,b as e,t as s,e as b,f as U,g as A,h as g,v as y,F as I,i as L,j as P,k as r,l as T}from"./index-DucGjSv2.js";const q={class:"min-h-screen bg-gradient-to-br from-slate-950 via-purple-950 to-slate-900 text-white p-8"},B={class:"p-4 flex justify-between items-center"},z={class:"flex items-center space-x-2"},D={class:"text-3xl font-bold text-white"},E={class:"text-white/80 text-sm"},F={class:"flex-1 container mx-auto px-4 py-8"},J={class:"max-w-2xl mx-auto"},O={key:0,class:"card mb-6 bounce-in"},H={class:"text-2xl font-bold mb-4 text-white"},K={class:"flex justify-between items-center"},Q={class:"text-slate-300 font-medium"},W={class:"text-slate-300 font-medium"},X={class:"card"},Y={class:"text-3xl font-bold mb-8 text-white bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent"},Z={key:0,class:"mb-8 p-6 bg-gradient-to-r from-green-900/40 to-emerald-900/40 border border-green-500/30 rounded-2xl backdrop-blur-sm"},ee={class:"flex items-center space-x-4 mb-4"},te={class:"font-bold text-xl text-white"},se={class:"text-white font-medium"},ae=["disabled"],oe={key:0,class:"flex items-center justify-center"},le={key:1,class:"flex items-center justify-center"},ne={class:"block text-sm font-bold text-slate-200 mb-3"},ie={class:"block text-sm font-bold text-slate-200 mb-3"},re={class:"space-y-3"},ue=["onUpdate:modelValue","placeholder"],de={class:"block text-sm font-bold text-slate-200 mb-3"},me={value:"5"},ce={value:"6"},pe={value:"7"},ge={value:"8"},ve={value:"9"},he={value:"10"},fe={class:"block text-sm font-bold text-slate-200 mb-3"},be={value:""},ye={value:"guilty-pleasures"},_e={value:"belgian"},$e={value:"classics"},we={value:"popular"},xe={value:"vlaams"},ke={value:"pop-rock"},Se=["disabled"],Ce=j({__name:"HomeView",setup(Ne){const _=P(),d=M(),l=u(2),n=u(["","","",""]),v=u(10),h=u(""),c=u(!1),m=u(!1);u("");const x=p(()=>d.players.length>0&&d.gamePhase!=="setup"),k=p(()=>d.players.map(t=>t.name)),S=p(()=>d.round),$=p(()=>{var t;if(!m.value)return!1;for(let a=0;a<l.value;a++)if(!((t=n.value[a])!=null&&t.trim()))return!1;return!0});async function N(){c.value=!0;try{await f.initiateLogin()}catch(t){console.error("Login failed:",t)}finally{c.value=!1}}function V(){if(!$.value)return;const t=n.value.slice(0,l.value).map(a=>a.trim());d.updateSettings({targetSongs:v.value,theme:h.value||void 0,maxRounds:20,targetScore:10}),d.initializePlayers(t),_.push("/game")}function C(){_.push("/game")}return R(()=>{m.value=f.isAuthenticated(),m.value&&f.initializePlayerIfReady();const t=localStorage.getItem("hitster-player-names");if(t)try{const a=JSON.parse(t);Array.isArray(a)&&(n.value=[...a,"","","",""].slice(0,4),l.value=Math.max(2,Math.min(4,a.length)))}catch(a){console.error("Error loading saved player names:",a)}}),w(l,t=>{const a=[...n.value];for(;a.length<4;)a.push("");n.value=a},{immediate:!0}),w([n,l],()=>{const t=n.value.slice(0,l.value).filter(a=>a.trim());t.length>0&&localStorage.setItem("hitster-player-names",JSON.stringify(t))},{deep:!0}),(t,a)=>(r(),i("div",q,[e("header",B,[e("div",z,[e("h1",D,s(t.$t("game.title")),1),e("span",E,s(t.$t("game.subtitle")),1)]),e("button",{onClick:a[0]||(a[0]=o=>t.$router.push("/settings")),class:"btn btn-secondary"}," ⚙️ "+s(t.$t("settings.language")),1)]),e("main",F,[e("div",J,[x.value?(r(),i("div",O,[e("h2",H,s(t.$t("game.continue")),1),e("div",K,[e("div",null,[e("p",Q,s(t.$t("game.players"))+": "+s(k.value.join(", ")),1),e("p",W,s(t.$t("game.round"))+": "+s(S.value),1)]),e("button",{onClick:C,class:"btn btn-primary"},s(t.$t("common.continue")),1)])])):b("",!0),e("div",X,[e("h2",Y,s(t.$t("game.newGame")),1),m.value?b("",!0):(r(),i("div",Z,[e("div",ee,[a[4]||(a[4]=e("div",{class:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center"},[e("span",{class:"text-2xl"},"🎵")],-1)),e("div",null,[e("h3",te,s(t.$t("game.spotify.required")),1),e("p",se,s(t.$t("game.spotify.loginRequired")),1)])]),e("button",{onClick:N,disabled:c.value,class:"btn bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white w-full font-bold text-lg py-4 shadow-lg hover:shadow-green-500/25"},[c.value?(r(),i("span",oe,[a[5]||(a[5]=e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"},null,-1)),U(" "+s(t.$t("common.loading")),1)])):(r(),i("span",le," 🎵 "+s(t.$t("game.spotify.login")),1))],8,ae)])),m.value?(r(),i("form",{key:1,onSubmit:A(V,["prevent"]),class:"space-y-6"},[e("div",null,[e("label",ne,s(t.$t("game.playerCount")),1),g(e("select",{"onUpdate:modelValue":a[1]||(a[1]=o=>l.value=o),class:"select"},a[6]||(a[6]=[e("option",{value:2},"2",-1),e("option",{value:3},"3",-1),e("option",{value:4},"4",-1)]),512),[[y,l.value,void 0,{number:!0}]])]),e("div",null,[e("label",ie,s(t.$t("game.playerNames")),1),e("div",re,[(r(!0),i(I,null,L(l.value,o=>g((r(),i("input",{key:`player-${o}`,"onUpdate:modelValue":G=>n.value[o-1]=G,placeholder:t.$t("game.playerName",{number:o}),class:"input",required:"",maxlength:"20"},null,8,ue)),[[T,n.value[o-1]]])),128))])]),e("div",null,[e("label",de,s(t.$t("game.targetSongs")),1),g(e("select",{"onUpdate:modelValue":a[2]||(a[2]=o=>v.value=o),class:"select"},[e("option",me,"5 "+s(t.$t("game.songs")),1),e("option",ce,"6 "+s(t.$t("game.songs")),1),e("option",pe,"7 "+s(t.$t("game.songs")),1),e("option",ge,"8 "+s(t.$t("game.songs")),1),e("option",ve,"9 "+s(t.$t("game.songs")),1),e("option",he,"10 "+s(t.$t("game.songs"))+" ("+s(t.$t("game.default"))+")",1)],512),[[y,v.value]])]),e("div",null,[e("label",fe,s(t.$t("game.theme")),1),g(e("select",{"onUpdate:modelValue":a[3]||(a[3]=o=>h.value=o),class:"select"},[e("option",be,s(t.$t("game.allMusic")),1),e("option",ye,s(t.$t("game.themes.guilty-pleasures")),1),e("option",_e,s(t.$t("game.themes.belgian")),1),e("option",$e,s(t.$t("game.themes.classics")),1),e("option",we,s(t.$t("game.themes.popular")),1),e("option",xe,s(t.$t("game.themes.vlaams")),1),e("option",ke,s(t.$t("game.themes.pop-rock")),1)],512),[[y,h.value]])]),e("button",{type:"submit",disabled:!$.value,class:"btn btn-primary btn-lg w-full"}," 🎮 "+s(t.$t("common.start")),9,Se)],32)):b("",!0)])])])]))}});export{Ce as default};
