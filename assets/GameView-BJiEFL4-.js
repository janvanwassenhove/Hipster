import{d as ae,n as ce,r as y,c as w,s as P,o as oe,a as te,p as ne,w as ie,b as u,e,f as b,q as ue,t as s,g as de,x as D,l as n,h as z,F as se,j as re,u as ge,k as me,y as pe,z as ve}from"./index-DPSJbJ-9.js";const fe={class:"card relative overflow-hidden bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 border border-purple-500/20 shadow-2xl shadow-purple-500/10"},be={class:"relative z-10 flex flex-col md:flex-row items-center space-y-6 md:space-y-0 md:space-x-8 p-6"},he={class:"flex-shrink-0"},ye={key:0,class:"relative group"},ke={key:1,class:"relative group"},xe=["src","alt"],$e={class:"flex-1 text-center md:text-left"},we={class:"mb-6"},_e={class:"text-gray-300 font-medium text-lg bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent"},Te={class:"text-sm text-gray-400 mt-2 font-light"},Pe={class:"mb-6"},Ce={key:0,class:"bg-gradient-to-r from-green-900/50 to-emerald-900/50 border border-green-400/30 rounded-2xl p-6 text-center backdrop-blur-sm"},Se={class:"flex items-center justify-center mb-3"},Me={class:"text-xl font-bold bg-gradient-to-r from-green-300 to-emerald-300 bg-clip-text text-transparent"},ze={class:"text-green-200 mb-4 font-medium"},je={class:"bg-green-800/30 rounded-xl p-4 border border-green-500/30"},Ae={class:"text-green-100 text-sm font-medium mb-2"},De={class:"text-green-200 text-xs"},Be={key:1,class:"bg-gradient-to-r from-blue-900/50 to-purple-900/50 border border-blue-400/30 rounded-2xl p-6 text-center backdrop-blur-sm"},Ie={class:"flex items-center justify-center mb-3"},Re={class:"text-xl font-bold bg-gradient-to-r from-blue-300 to-purple-300 bg-clip-text text-transparent"},Le={class:"text-blue-200 mb-3 font-medium"},Ne={class:"text-sm text-blue-300 font-semibold"},Fe={class:"text-xs text-blue-400 mt-2 opacity-80"},Ee={key:2,class:"music-player-controls bg-gradient-to-br from-gray-900/80 to-black/80 rounded-2xl p-6 backdrop-blur-sm border border-gray-700/50 shadow-2xl"},Ve={class:"flex items-center justify-center space-x-8 mb-6"},Oe=["disabled"],He=["disabled"],Ue={class:"w-16 h-16 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center shadow-2xl shadow-purple-500/50 group-hover:from-purple-500 group-hover:to-pink-500 transition-all duration-300 group-hover:scale-110 group-hover:shadow-purple-400/60"},Ye={key:0,class:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"},Xe={key:1,class:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20"},qe={key:2,class:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20"},Ge={key:0,class:"p-6 bg-gradient-to-r from-blue-900/40 to-purple-900/40 border border-blue-400/30 rounded-2xl backdrop-blur-sm"},Ze={class:"text-center"},Je={class:"text-2xl font-bold bg-gradient-to-r from-blue-300 to-purple-300 bg-clip-text text-transparent mb-2"},Ke={class:"text-blue-200 text-lg font-medium mb-1"},We={class:"text-blue-300 font-medium"},Qe={class:"text-sm text-blue-400 mt-4"},et=["href"],tt={key:0,class:"mt-6 p-6 bg-gradient-to-r from-purple-900/30 to-pink-900/30 border border-purple-400/30 rounded-2xl backdrop-blur-sm"},ot={class:"text-center"},st={class:"flex items-center justify-center mb-3"},rt={class:"font-bold text-lg bg-gradient-to-r from-purple-300 to-pink-300 bg-clip-text text-transparent"},at={class:"text-purple-200 text-sm font-medium"},lt={class:"flex items-center justify-center mb-3"},nt={key:0,class:"w-12 h-12 bg-gradient-to-br from-cyan-500 to-blue-500 rounded-full flex items-center justify-center mr-3 animate-bounce"},it={key:1,class:"w-12 h-12 bg-gradient-to-br from-red-500 to-pink-500 rounded-full flex items-center justify-center mr-3 animate-pulse"},ut={class:"font-bold text-2xl"},dt={key:0,class:"text-lg mt-2 font-semibold"},ct={class:"bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent"},gt=ae({__name:"TrackPlayer",props:{track:{},showAnswer:{type:Boolean,default:!1},showResult:{type:Boolean,default:!1},isCorrect:{type:Boolean,default:!1},pointsEarned:{default:0}},emits:["placeTrack"],setup(Y,{emit:H}){const l=Y,{t:j}=ce(),c=y(!1),h=y(!1);y(!1);const k=y(0),I=y(0);y(.7),y(!1),y(!1),y(!1);const C=w(()=>{var T,x,S,B;const r=(x=(T=l.track.images)==null?void 0:T[0])==null?void 0:x.url,i=(B=(S=l.track.album.images)==null?void 0:S[0])==null?void 0:B.url;return r||i||"https://via.placeholder.com/300x300/6B7280/FFFFFF?text=No+Image"}),N=w(()=>l.track.artists.map(r=>r.name).join(", ")),X=w(()=>l.showResult?l.isCorrect?"bg-gradient-to-r from-cyan-900/40 to-blue-900/40 border border-cyan-400/30 text-cyan-100":"bg-gradient-to-r from-red-900/40 to-pink-900/40 border border-red-400/30 text-red-100":""),d=w(()=>l.showResult?l.isCorrect?j("game.turn.correct",{year:l.track.year}):j("game.turn.incorrect",{year:l.track.year}):"");w(()=>I.value===0?0:k.value/I.value*100);const A=w(()=>!!l.track.uri),R=w(()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|CriOS/i.test(navigator.userAgent)),_=w(()=>R.value?A.value&&P.isAuthenticated():A.value&&P.isPlayerReady()),m=w(()=>_.value||!!l.track.preview_url);async function q(){try{_.value&&l.track.uri&&(c.value?await P.pausePlayback()&&(c.value=!1):await P.startPlayback(l.track.uri)&&(c.value=!0,R.value?W():Q()))}catch(r){console.error("Playback error:",r),R.value&&r.message.includes("No active Spotify device")&&alert("Please open the Spotify app on your device first, then try again.")}}function W(){const r=async()=>{var T;if(!_.value||!R.value)return;const i=await P.getSpotifyConnectState();if(i){const x=((T=i.item)==null?void 0:T.uri)===l.track.uri,S=i.is_playing&&x;c.value!==S&&(c.value=S),c.value&&setTimeout(r,2e3)}else c.value&&(c.value=!1)};r()}function Q(){const r=async()=>{if(!_.value)return;const i=await P.getPlaybackState();i&&(c.value=!i.paused,k.value=i.position/1e3,I.value=i.duration/1e3,c.value&&setTimeout(r,1e3))};r()}async function J(){var r,i,T,x;if(P.isPlayerReady())try{const S=await P.getPlaybackState();if(S){const B=((i=(r=S.track_window)==null?void 0:r.current_track)==null?void 0:i.uri)===l.track.uri,V=S.paused===!1&&B;console.log("Playback state check:",{paused:S.paused,currentTrackUri:(x=(T=S.track_window)==null?void 0:T.current_track)==null?void 0:x.uri,expectedUri:l.track.uri,isCurrentTrack:B,isActuallyPlaying:V,componentIsPlaying:c.value}),c.value!==V&&(console.log(`🔄 Syncing playback state: ${c.value} → ${V}`),c.value=V)}}catch(S){console.warn("Could not check playback state:",S)}}return oe(()=>{const r=setInterval(J,2e3);te(()=>{clearInterval(r)})}),oe(()=>{P.isAuthenticated()&&ne(()=>{P.initializePlayerIfReady()})}),ie(()=>l.track,async(r,i)=>{if(r&&r!==i){console.log("New track detected:",r.name),await ne(),c.value=!1;const T=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|CriOS/i.test(navigator.userAgent);setTimeout(async()=>{if(console.log("Checking if auto-playback can start:",{canPlayAudio:m.value,canPlayFullTrack:_.value,hasSpotifyUri:A.value,isPlayerReady:P.isPlayerReady(),isPlaying:c.value}),m.value&&!c.value){console.log("Auto-starting playback for new track:",r.name);try{await q(),console.log("✅ Auto-playback started successfully")}catch(x){T?console.log("🔇 Auto-playback blocked on mobile - user interaction required"):console.error("❌ Auto-playback failed:",x)}}else{const x=m.value?"Already playing":"No audio source available";console.log(`Cannot auto-start playback: ${x}`),!T&&A.value&&console.log("Has Spotify URI - playback will use Spotify Web Playback SDK")}},300)}},{immediate:!1}),te(()=>{_.value&&P.stopPlayback()}),(r,i)=>(n(),u("div",fe,[i[12]||(i[12]=e("div",{class:"absolute inset-0 opacity-10"},[e("div",{class:"absolute top-0 left-0 w-72 h-72 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full blur-3xl animate-pulse"}),e("div",{class:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-full blur-3xl animate-pulse delay-1000"})],-1)),e("div",be,[e("div",he,[r.showAnswer?(n(),u("div",ke,[e("img",{src:C.value,alt:r.track.name,class:"w-40 h-40 rounded-2xl shadow-2xl object-cover border border-gray-700/50 backdrop-blur-sm transform group-hover:scale-105 transition-transform duration-300"},null,8,xe),i[2]||(i[2]=e("div",{class:"absolute inset-0 w-40 h-40 rounded-2xl bg-gradient-to-br from-cyan-500/20 to-blue-500/20 blur-xl group-hover:blur-2xl transition-all duration-300"},null,-1))])):(n(),u("div",ye,i[1]||(i[1]=[ue('<div class="w-40 h-40 rounded-2xl shadow-2xl bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center border border-gray-700/50 backdrop-blur-sm" data-v-84825954><div class="w-32 h-32 rounded-full bg-gradient-to-br from-gray-900 to-black shadow-inner flex items-center justify-center" data-v-84825954><div class="w-20 h-20 rounded-full bg-gradient-to-br from-gray-800 to-gray-900 shadow-inner flex items-center justify-center" data-v-84825954><svg class="w-12 h-12 text-gray-400 animate-spin-slow" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-84825954><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" data-v-84825954></path></svg></div></div></div><div class="absolute inset-0 w-40 h-40 rounded-2xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 blur-xl group-hover:blur-2xl transition-all duration-300" data-v-84825954></div>',2)])))]),e("div",$e,[e("div",we,[e("p",_e,s(r.$t("game.turn.listening")),1),e("p",Te,s(r.$t("game.turn.placeOnTimeline")),1)]),e("div",Pe,[!m.value&&R.value&&A.value?(n(),u("div",Ce,[e("div",Se,[i[3]||(i[3]=e("div",{class:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center mr-3 shadow-lg"},[e("svg",{class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"})])],-1)),e("h3",Me,s(r.$t("game.spotifyConnect.title","Spotify Connect")),1)]),e("p",ze,s(r.$t("game.spotifyConnect.description","Music will play through your Spotify app")),1),e("div",je,[e("p",Ae," 📱 "+s(r.$t("game.spotifyConnect.instructions","Make sure your Spotify app is open on this device")),1),e("p",De,s(r.$t("game.spotifyConnect.note","Audio will play through your device speakers or headphones")),1)])])):_.value?b("",!0):(n(),u("div",Be,[e("div",Ie,[i[4]||(i[4]=e("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mr-3 shadow-lg"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})])],-1)),e("h3",Re,s(A.value?r.$t("game.premiumRequired"):r.$t("game.demoMode")),1)]),e("p",Le,s(A.value?r.$t("game.needsPremium"):r.$t("game.needSpotifyForAudio")),1),e("p",Ne,[e("strong",null,s(A.value?r.$t("game.premiumNeededForFullPlay"):r.$t("game.needSpotifyForAudio")),1)]),e("p",Fe,s(r.$t("game.demoModeInstructions")),1)])),m.value?(n(),u("div",Ee,[e("div",Ve,[e("button",{onClick:i[0]||(i[0]=(...T)=>r.restartTrack&&r.restartTrack(...T)),class:"control-btn group relative",disabled:!m.value,title:"Restart"},i[5]||(i[5]=[e("div",{class:"w-12 h-12 bg-gradient-to-br from-gray-800 to-gray-900 rounded-full flex items-center justify-center border border-gray-600/50 shadow-lg group-hover:from-purple-600 group-hover:to-pink-600 group-hover:border-purple-400/50 transition-all duration-300 group-hover:scale-110"},[e("svg",{class:"w-5 h-5 text-gray-300 group-hover:text-white transition-colors duration-300",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})])],-1)]),8,Oe),e("button",{onClick:q,class:"play-btn group relative",disabled:!m.value},[e("div",Ue,[h.value?(n(),u("div",Ye)):c.value?(n(),u("svg",Xe,i[6]||(i[6]=[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(n(),u("svg",qe,i[7]||(i[7]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"},null,-1)])))])],8,He)])])):b("",!0)]),r.showAnswer?(n(),u("div",Ge,[e("div",Ze,[e("h4",Je,s(r.track.name),1),e("p",Ke,s(N.value),1),e("p",We,s(r.track.album.name)+" ("+s(r.track.year)+")",1),e("p",Qe,[e("a",{href:r.track.external_urls.spotify,target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-green-600 to-green-500 text-white rounded-full hover:from-green-500 hover:to-green-400 transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-green-500/25"},[i[8]||(i[8]=e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"})],-1)),de(" "+s(r.$t("game.openInSpotify")),1)],8,et)])])])):b("",!0)])]),r.showAnswer?b("",!0):(n(),u("div",tt,[e("div",ot,[e("div",st,[i[9]||(i[9]=e("div",{class:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center mr-3 animate-pulse"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("p",rt,s(r.$t("game.turn.placing")),1)]),e("p",at,s(R.value?r.$t("game.timeline.mobileInstructions"):r.$t("game.dragToTimeline")),1)])])),r.showResult?(n(),u("div",{key:1,class:D(["mt-6 p-6 rounded-2xl text-center backdrop-blur-sm",X.value])},[e("div",lt,[r.isCorrect?(n(),u("div",nt,i[10]||(i[10]=[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]))):(n(),u("div",it,i[11]||(i[11]=[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))),e("p",ut,s(d.value),1)]),r.pointsEarned>0?(n(),u("p",dt,[e("span",ct,s(r.$t("game.turn.points",{points:r.pointsEarned})),1)])):b("",!0)],2)):b("",!0)]))}}),mt=(Y,H)=>{const l=Y.__vccOpts||Y;for(const[j,c]of H)l[j]=c;return l},pt=mt(gt,[["__scopeId","data-v-84825954"]]),vt={key:0,class:"absolute inset-0 opacity-10"},ft={class:"relative z-10"},bt={class:"flex items-center justify-between mb-6"},ht={class:"text-xl font-bold flex items-center space-x-3"},yt={key:0,class:"text-2xl animate-bounce"},kt={class:"text-right"},xt={class:"text-3xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent"},$t={class:"flex items-center space-x-2 text-sm text-gray-300"},wt={class:"font-medium"},_t={key:0,class:"mb-6"},Tt={class:"text-sm font-medium text-gray-300 mb-3"},Pt={class:"flex space-x-3"},Ct=["title"],St={class:"flex items-center space-x-2"},Mt=["title"],zt={class:"flex items-center space-x-2"},jt={class:"mb-6"},At={class:"text-lg font-semibold text-gray-200 mb-4 flex items-center"},Dt={key:0,class:"text-center py-12 text-gray-400"},Bt={class:"text-lg font-medium mb-2"},It={class:"text-center text-gray-300 font-medium"},Rt={key:1,class:"space-y-3"},Lt={class:"text-center text-gray-400 text-sm font-medium"},Nt={class:"p-4 bg-gradient-to-r from-gray-800/60 to-gray-900/60 backdrop-blur-sm border border-gray-600/30 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]"},Ft={class:"flex items-center space-x-4"},Et={class:"w-16 h-16 rounded-xl overflow-hidden flex-shrink-0 relative group-hover:scale-105 transition-transform duration-300"},Vt=["src","alt"],Ot={key:1,class:"w-16 h-16 bg-gradient-to-br from-gray-700 to-gray-800 flex items-center justify-center"},Ht={class:"flex-1 min-w-0"},Ut={class:"font-bold text-lg text-gray-100 truncate"},Yt={class:"text-sm text-gray-300 truncate font-medium"},Xt={class:"text-right flex-shrink-0"},qt={class:"font-bold text-2xl bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent"},Gt=["onDragover","onDragleave","onDrop","onTouchstart","onClick","data-drop-zone"],Zt={class:"text-center text-gray-400 text-sm font-medium"},Jt=["data-drop-zone"],Kt={class:"text-center text-gray-400 text-sm font-medium"},Wt={class:"flex items-center space-x-4"},Qt={class:"flex-1 min-w-0"},eo={class:"font-bold text-lg text-blue-200"},to={class:"text-sm text-blue-300 font-medium"},oo={key:2,class:"mt-6 pt-6 border-t border-gray-600/30"},so={class:"flex justify-between text-sm text-gray-300"},ro={class:"font-medium"},ao={key:0,class:"font-mono"},lo={key:1,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},no={class:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 border border-purple-500/20 shadow-2xl shadow-purple-500/10 rounded-2xl p-6 max-w-sm w-full mx-auto relative overflow-hidden"},io={class:"relative z-10"},uo={class:"flex items-center space-x-3 mb-4"},co={class:"text-xl font-bold bg-gradient-to-r from-green-300 to-blue-300 bg-clip-text text-transparent"},go={class:"mb-6"},mo={class:"text-gray-200 text-lg leading-relaxed"},po={class:"flex space-x-3"},vo=ae({__name:"PlayerTimeline",props:{player:{},isCurrent:{type:Boolean},currentTrack:{},canPlace:{type:Boolean}},emits:["placeTrack","useToken"],setup(Y,{emit:H}){const l=Y,j=H,c=y(!1),h=y([]),k=y(null),I=y(!1),C=y(!1),N=y({x:0,y:0}),X=y({x:0,y:0}),d=y(null),A=y({x:0,y:0}),R=y(null);let _=null;const m=w(()=>"ontouchstart"in window||navigator.maxTouchPoints>0),q=w(()=>{var p;const t=((p=l.player)==null?void 0:p.timeline)||[];if(t.length<2)return null;const o=t.map($=>$.year).sort(($,L)=>$-L);return`${o[0]} - ${o[o.length-1]}`});function W(t){var o,p;return t.images&&t.images.length>0&&((o=t.images[0])!=null&&o.url)?t.images[0].url:t.album&&t.album.images&&t.album.images.length>0&&((p=t.album.images[0])!=null&&p.url)?t.album.images[0].url:"/placeholder-album.png"}function Q(t){return t.artists.map(o=>o.name).join(", ")}function J(t){var p;if(!l.currentTrack)return;(p=t.dataTransfer)==null||p.setData("text/plain",JSON.stringify(l.currentTrack)),t.target.classList.add("dragging")}function r(t){t.target.classList.remove("dragging"),c.value=!1,h.value=[]}function i(t){!l.currentTrack||!l.canPlace||(c.value=!1,h.value=[],j("placeTrack",l.currentTrack,t))}function T(t){j("useToken",t)}function x(t){!l.currentTrack||!l.canPlace||(k.value=t,I.value=!0,"vibrate"in navigator&&navigator.vibrate(50))}function S(t){var $;if(t===null)return"";const o=(($=l.player)==null?void 0:$.timeline)||[],p=o.length;return t===0?p===0?"Place as your first track":`Place before ${o[0].name} (${o[0].year})`:t===p?`Place after ${o[p-1].name} (${o[p-1].year})`:`Place between ${o[t-1].name} (${o[t-1].year}) and ${o[t].name} (${o[t].year})`}function B(){k.value!==null&&l.currentTrack&&(j("placeTrack",l.currentTrack,k.value),k.value=null,I.value=!1)}function V(){k.value=null,I.value=!1}function a(t){if(!(!l.currentTrack||!l.canPlace))try{t.preventDefault(),C.value=!0;const o=t.touches[0];if(!o)return;N.value={x:o.clientX,y:o.clientY},X.value={x:o.clientX,y:o.clientY};const p=t.target,$=p.getBoundingClientRect();d.value=p.cloneNode(!0),d.value.style.position="fixed",d.value.style.top=`${$.top}px`,d.value.style.left=`${$.left}px`,d.value.style.width=`${$.width}px`,d.value.style.height=`${$.height}px`,d.value.style.zIndex="9999",d.value.style.opacity="0.8",d.value.style.transform="rotate(2deg)",d.value.style.pointerEvents="none",d.value.classList.add("dragging"),document.body.appendChild(d.value),p.classList.add("dragging"),"vibrate"in navigator&&navigator.vibrate(50)}catch(o){console.warn("Touch start error:",o),E()}}function g(t){if(!C.value)return;t.preventDefault();const o=t.touches[0];U(o.clientY),A.value={x:o.clientX,y:o.clientY};const p=50,$=50;d.value&&(d.value.style.left=`${o.clientX-p}px`,d.value.style.top=`${o.clientY-$}px`);const L=document.elementFromPoint(o.clientX,o.clientY),Z=L==null?void 0:L.closest("[data-drop-zone]");if(c.value=!1,h.value.fill(!1),Z){const v=parseInt(Z.getAttribute("data-drop-zone")||"0");v===0?c.value=!0:v<=h.value.length&&(h.value[v]=!0)}}function F(t){if(K(),!!C.value)try{t.preventDefault(),C.value=!1;const o=t.changedTouches[0];if(!o){E();return}const p=document.elementFromPoint(o.clientX,o.clientY),$=p==null?void 0:p.closest("[data-drop-zone]");d.value&&(d.value.style.transition="opacity 0.2s ease-out",d.value.style.opacity="0",setTimeout(()=>{d.value&&document.body.contains(d.value)&&document.body.removeChild(d.value),d.value=null},200));const L=document.querySelector(".dragging");if(L&&L.classList.remove("dragging"),c.value=!1,h.value.fill(!1),$&&l.currentTrack){const Z=parseInt($.getAttribute("data-drop-zone")||"0");"vibrate"in navigator&&navigator.vibrate(100),j("placeTrack",l.currentTrack,Z)}}catch(o){console.warn("Touch end error:",o),E()}}function O(t){C.value&&(U(t.clientY),A.value={x:t.clientX,y:t.clientY})}function G(){K(),d.value&&(d.value.style.transition="opacity 0.2s ease-out",d.value.style.opacity="0",setTimeout(()=>{d.value&&document.body.contains(d.value)&&document.body.removeChild(d.value),d.value=null},200));const t=document.querySelector(".dragging");t&&t.classList.remove("dragging"),c.value=!1,h.value.fill(!1)}function U(t){_||(_=setInterval(()=>{const o=window.innerHeight,p=100,$=5;t<p?window.scrollBy(0,-$):t>o-p&&window.scrollBy(0,$)},16))}function K(){_&&(clearInterval(_),_=null)}function M(){var o;const t=((o=l.player)==null?void 0:o.timeline)||[];h.value=new Array(t.length+1).fill(!1)}function E(){C.value=!1,c.value=!1,h.value.fill(!1),d.value&&document.body.contains(d.value)&&(document.body.removeChild(d.value),d.value=null),document.querySelectorAll(".dragging").forEach(o=>o.classList.remove("dragging"))}return te(()=>{K(),E()}),ie(()=>{var t;return(((t=l.player)==null?void 0:t.timeline)||[]).length},()=>{M()},{immediate:!0}),(t,o)=>{var p,$,L,Z;return n(),u("div",{class:D(["card relative overflow-hidden",{"ring-2 ring-cyan-400 shadow-2xl shadow-cyan-400/20":t.isCurrent}])},[t.isCurrent?(n(),u("div",vt,o[17]||(o[17]=[e("div",{class:"absolute top-0 left-0 w-64 h-64 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-full blur-3xl animate-pulse"},null,-1),e("div",{class:"absolute bottom-0 right-0 w-80 h-80 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full blur-3xl animate-pulse delay-1000"},null,-1)]))):b("",!0),e("div",ft,[e("div",bt,[e("h3",ht,[e("span",{class:D(t.isCurrent?"bg-gradient-to-r from-cyan-300 to-blue-300 bg-clip-text text-transparent":"text-gray-200")},s(t.player.name),3),t.isCurrent?(n(),u("span",yt,"👑")):b("",!0)]),e("div",kt,[e("p",xt,s(t.player.score),1),e("div",$t,[o[18]||(o[18]=e("span",{class:"text-lg"},"🎵",-1)),e("span",wt,s(t.$t("game.score.tokens",{count:t.player.tokens})),1)])])]),t.isCurrent&&t.canPlace&&t.player.tokens>0?(n(),u("div",_t,[e("h4",Tt,s(t.$t("game.tokenAbilities")),1),e("div",Pt,[e("button",{onClick:o[0]||(o[0]=v=>T("skip")),class:"group relative px-4 py-2 bg-gradient-to-r from-orange-600 to-pink-600 hover:from-orange-500 hover:to-pink-500 text-white rounded-xl font-medium transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-orange-500/25",title:t.$t("game.tokens.skip.description")},[e("div",St,[o[19]||(o[19]=e("span",{class:"text-lg"},"⏭️",-1)),e("span",null,s(t.$t("game.tokens.skip.label")),1)])],8,Ct),e("button",{onClick:o[1]||(o[1]=v=>T("hint")),class:"group relative px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white rounded-xl font-medium transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-cyan-500/25",title:t.$t("game.tokens.hint.description")},[e("div",zt,[o[20]||(o[20]=e("span",{class:"text-lg"},"💡",-1)),e("span",null,s(t.$t("game.tokens.hint.label")),1)])],8,Mt)])])):b("",!0),e("div",jt,[e("h4",At,[o[21]||(o[21]=e("span",{class:"mr-2"},"🎵",-1)),de(" "+s(t.$t("game.timeline.title")),1)]),!t.player.timeline||t.player.timeline.length===0?(n(),u("div",Dt,[o[22]||(o[22]=e("div",{class:"mb-4"},[e("div",{class:"w-20 h-20 mx-auto bg-gradient-to-br from-gray-700 to-gray-800 rounded-full flex items-center justify-center shadow-lg"},[e("span",{class:"text-3xl"},"🎼")])],-1)),e("p",Bt,s(t.$t("game.timeline.empty")),1),t.canPlace?(n(),u("div",{key:0,class:D(["timeline-slot mt-6 group",{"drag-over":c.value,selected:k.value===0&&m.value}]),onDragover:o[2]||(o[2]=z(v=>c.value=!0,["prevent"])),onDragleave:o[3]||(o[3]=z(v=>c.value=!1,["prevent"])),onDrop:o[4]||(o[4]=z(v=>i(0),["prevent"])),onTouchstart:o[5]||(o[5]=z(v=>m.value?x(0):null,["prevent"])),onClick:o[6]||(o[6]=v=>m.value?x(0):null),"data-drop-zone":0},[e("div",{class:D(["p-8 border-2 border-dashed border-gray-500 rounded-2xl group-hover:border-purple-400 transition-colors duration-300 bg-gradient-to-br from-gray-800/30 to-gray-900/30 backdrop-blur-sm",{"border-green-400 bg-green-500/20":k.value===0&&m.value}])},[e("p",It,s(m.value?t.$t("game.timeline.tapToSelect"):t.$t("game.timeline.placeHere")),1)],2)],34)):b("",!0)])):t.player.timeline&&t.player.timeline.length>0?(n(),u("div",Rt,[t.canPlace?(n(),u("div",{key:0,class:D(["timeline-slot h-20 group",{"drag-over":h.value[0],selected:k.value===0&&m.value}]),onDragover:o[7]||(o[7]=z(v=>h.value[0]=!0,["prevent"])),onDragleave:o[8]||(o[8]=z(v=>h.value[0]=!1,["prevent"])),onDrop:o[9]||(o[9]=z(v=>i(0),["prevent"])),onTouchstart:o[10]||(o[10]=z(v=>m.value?x(0):null,["prevent"])),onClick:o[11]||(o[11]=v=>m.value?x(0):null),"data-drop-zone":0},[e("div",{class:D(["h-full border-2 border-dashed border-gray-600 rounded-xl group-hover:border-cyan-400 transition-colors duration-300 bg-gradient-to-r from-gray-800/20 to-gray-700/20 backdrop-blur-sm flex items-center justify-center",{"border-green-400 bg-green-500/20":k.value===0&&m.value}])},[e("p",Lt,s(m.value?t.$t("game.timeline.tapToSelect"):t.$t("game.placeEarlier")),1)],2)],34)):b("",!0),(n(!0),u(se,null,re(t.player.timeline||[],(v,f)=>{var le;return n(),u("div",{key:v.id,class:"track-card group relative"},[e("div",Nt,[e("div",Ft,[e("div",Et,[v.revealed?(n(),u("img",{key:0,src:W(v),alt:v.name,class:"w-16 h-16 object-cover"},null,8,Vt)):(n(),u("div",Ot,o[23]||(o[23]=[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})],-1)])))]),e("div",Ht,[e("p",Ut,s(v.name),1),e("p",Yt,s(Q(v)),1)]),e("div",Xt,[e("p",qt,s(v.year),1)])])]),t.canPlace&&f<(((le=t.player.timeline)==null?void 0:le.length)||0)-1?(n(),u("div",{key:0,class:D(["timeline-slot h-20 mt-3 group",{"drag-over":h.value[f+1],selected:k.value===f+1&&m.value}]),onDragover:z(ee=>h.value[f+1]=!0,["prevent"]),onDragleave:z(ee=>h.value[f+1]=!1,["prevent"]),onDrop:z(ee=>i(f+1),["prevent"]),onTouchstart:z(ee=>m.value?x(f+1):null,["prevent"]),onClick:ee=>m.value?x(f+1):null,"data-drop-zone":f+1},[e("div",{class:D(["h-full border-2 border-dashed border-gray-600 rounded-xl group-hover:border-purple-400 transition-colors duration-300 bg-gradient-to-r from-gray-800/20 to-gray-700/20 backdrop-blur-sm flex items-center justify-center",{"border-green-400 bg-green-500/20":k.value===f+1&&m.value}])},[e("p",Zt,s(m.value?t.$t("game.timeline.tapToSelect"):t.$t("game.placeBetween")),1)],2)],42,Gt)):b("",!0)])}),128)),t.canPlace?(n(),u("div",{key:1,class:D(["timeline-slot h-20 group",{"drag-over":h.value[((p=t.player.timeline)==null?void 0:p.length)||0],selected:k.value===((($=t.player.timeline)==null?void 0:$.length)||0)&&m.value}]),onDragover:o[12]||(o[12]=z(v=>{var f;return h.value[((f=t.player.timeline)==null?void 0:f.length)||0]=!0},["prevent"])),onDragleave:o[13]||(o[13]=z(v=>{var f;return h.value[((f=t.player.timeline)==null?void 0:f.length)||0]=!1},["prevent"])),onDrop:o[14]||(o[14]=z(v=>{var f;return i(((f=t.player.timeline)==null?void 0:f.length)||0)},["prevent"])),onTouchstart:o[15]||(o[15]=z(v=>{var f;return m.value?x(((f=t.player.timeline)==null?void 0:f.length)||0):null},["prevent"])),onClick:o[16]||(o[16]=v=>{var f;return m.value?x(((f=t.player.timeline)==null?void 0:f.length)||0):null}),"data-drop-zone":((L=t.player.timeline)==null?void 0:L.length)||0},[e("div",{class:D(["h-full border-2 border-dashed border-gray-600 rounded-xl group-hover:border-cyan-400 transition-colors duration-300 bg-gradient-to-r from-gray-800/20 to-gray-700/20 backdrop-blur-sm flex items-center justify-center",{"border-green-400 bg-green-500/20":k.value===(((Z=t.player.timeline)==null?void 0:Z.length)||0)&&m.value}])},[e("p",Kt,s(m.value?t.$t("game.timeline.tapToSelect"):t.$t("game.placeLater")),1)],2)],42,Jt)):b("",!0)])):b("",!0)]),t.canPlace&&t.currentTrack?(n(),u("div",{key:1,ref_key:"scrollContainer",ref:R,class:"timeline-container p-6 bg-gradient-to-r from-blue-900/50 to-purple-900/50 border-2 border-blue-400/30 rounded-2xl cursor-move touch-manipulation select-none backdrop-blur-sm shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",draggable:"true",onDragstart:J,onDragend:r,onTouchstart:a,onTouchmove:g,onTouchend:F,onMousemove:O,onMouseup:G,style:{touchAction:"none"}},[e("div",Wt,[o[24]||(o[24]=e("div",{class:"w-16 h-16 rounded-xl bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center flex-shrink-0 shadow-lg"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})])],-1)),e("div",Qt,[e("p",eo,s(t.$t("game.newTrack")),1),e("p",to,s(t.$t("game.dragToPlace")),1)]),o[25]||(o[25]=e("div",{class:"text-blue-300"},[e("span",{class:"text-3xl animate-pulse"},"🎵")],-1))])],544)):b("",!0),t.player.timeline&&t.player.timeline.length>0?(n(),u("div",oo,[e("div",so,[e("span",ro,s(t.$t("game.tracksInTimeline",{count:t.player.timeline.length})),1),q.value?(n(),u("span",ao,s(q.value),1)):b("",!0)])])):b("",!0)]),I.value&&m.value?(n(),u("div",lo,[e("div",no,[o[27]||(o[27]=e("div",{class:"absolute inset-0 opacity-10"},[e("div",{class:"absolute top-0 left-0 w-24 h-24 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-full blur-3xl animate-pulse"}),e("div",{class:"absolute bottom-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full blur-3xl animate-pulse delay-1000"})],-1)),e("div",io,[e("div",uo,[o[26]||(o[26]=e("div",{class:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg"},[e("span",{class:"text-xl"},"📍")],-1)),e("h3",co,s(t.$t("game.timeline.selectedPosition")),1)]),e("div",go,[e("p",mo,s(S(k.value)),1)]),e("div",po,[e("button",{onClick:V,class:"flex-1 px-4 py-3 bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-500 hover:to-gray-600 text-white font-medium rounded-xl transition-all duration-300 hover:scale-105 shadow-lg"},s(t.$t("game.timeline.cancelSelection")),1),e("button",{onClick:B,class:"flex-1 px-4 py-3 bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-500 hover:to-blue-500 text-white font-bold rounded-xl transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-green-500/25"},s(t.$t("game.timeline.confirmPlacement")),1)])])])])):b("",!0)],2)}}}),fo={class:"min-h-screen flex flex-col"},bo={class:"bg-white/10 backdrop-blur-sm p-4"},ho={class:"flex justify-between items-center"},yo={class:"flex items-center space-x-4"},ko={class:"text-white"},xo={class:"text-xl font-bold"},$o={class:"flex items-center space-x-3 text-sm opacity-80"},wo={key:0,class:"px-2 py-1 bg-purple-500/30 rounded-full border border-purple-400/50 text-purple-200 font-medium"},_o={key:1,class:"px-2 py-1 bg-gray-500/30 rounded-full border border-gray-400/50 text-gray-200 font-medium"},To={class:"text-white text-right"},Po={class:"text-sm opacity-80"},Co={class:"flex-1 container mx-auto px-4 py-6"},So={key:0,class:"max-w-2xl mx-auto"},Mo={class:"card text-center"},zo={class:"text-2xl font-semibold mb-4"},jo={class:"text-gray-600 mb-6"},Ao={key:1,class:"space-y-6"},Do={class:"card text-center bg-green-50 border-green-200"},Bo={class:"text-2xl font-bold text-white mb-2"},Io={class:"text-white"},Ro={key:0,class:"mt-4"},Lo={key:1,class:"mt-4"},No={class:"flex items-center justify-center space-x-2"},Fo={key:0,class:"card bg-yellow-50 border-yellow-200"},Eo={class:"flex items-center space-x-3"},Vo={class:"flex-1"},Oo={class:"text-lg font-semibold text-yellow-800"},Ho={class:"text-yellow-700 text-sm"},Uo={class:"flex space-x-2"},Yo={key:1,class:"card bg-orange-50 border-orange-200"},Xo={key:3,class:"max-w-4xl mx-auto"},qo={class:"card"},Go={class:"text-lg font-semibold mb-4"},Zo={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Jo={class:"font-semibold text-gray-800"},Ko={class:"text-2xl font-bold text-gray-900"},Wo={class:"text-sm text-gray-600"},Qo={class:"text-xs text-gray-500"},es={key:2,class:"max-w-2xl mx-auto"},ts={class:"card text-center"},os={class:"text-3xl font-bold mb-4 text-white"},ss={class:"text-xl mb-6"},rs={class:"mb-6"},as={class:"text-lg font-semibold mb-3"},ls={class:"space-y-2"},ns={class:"font-medium"},is={class:"font-bold"},us={class:"flex space-x-4 justify-center"},ds={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},cs={class:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 border border-purple-500/20 shadow-2xl shadow-purple-500/10 rounded-2xl p-8 max-w-md w-full mx-auto relative overflow-hidden"},gs={class:"relative z-10"},ms={class:"flex items-center space-x-3 mb-6"},ps={class:"text-2xl font-bold bg-gradient-to-r from-cyan-300 to-blue-300 bg-clip-text text-transparent"},vs={class:"mb-8"},fs={class:"text-gray-200 text-lg leading-relaxed"},bs={class:"flex justify-center"},ys=ae({__name:"GameView",setup(Y){const H=me(),l=ge(),j=y(!1),c=y(!1),h=y(""),k=y(P.isAuthenticated()),I=w(()=>l.players),C=w(()=>l.currentPlayer),N=w(()=>l.currentTrack),X=w(()=>l.gamePhase),d=w(()=>l.round),A=w(()=>l.settings),R=w(()=>l.winner),_=w(()=>k.value),m=w(()=>_.value?!P.isPlayerReady()&&W.value>3e4:!1),q=y(Date.now()),W=w(()=>Date.now()-q.value),Q=w(()=>[...I.value].sort((a,g)=>{var G,U;const F=((G=a.timeline)==null?void 0:G.length)||0,O=((U=g.timeline)==null?void 0:U.length)||0;return O!==F?O-F:g.tokens!==a.tokens?g.tokens-a.tokens:g.score-a.score}));async function J(){var a;j.value=!0;try{console.log("Loading next track...");const g=await l.getNextTrack();g?console.log("Track loaded successfully:",g.name,"by",(a=g.artists[0])==null?void 0:a.name):console.error("No tracks available")}catch(g){console.error("Error loading track:",g)}finally{j.value=!1}}function r(a,g){l.placeTrackOnTimeline(a,g),setTimeout(()=>{l.nextPlayer()},2e3)}function i(a){var F;if(!C.value)return;if(l.useToken(C.value.id,a))switch(a){case"skip":J();break;case"hint":const O=Math.floor(((F=N.value)==null?void 0:F.year)/10)*10;h.value=`This track was released in the ${O}s`,c.value=!0;break}}function T(){c.value=!1,h.value=""}function x(){l.resetGame(),H.push("/")}function S(){H.push("/")}function B(){const a=P.isAuthenticated();console.log("Spotify auth check in GameView:",{isAuthenticated:a,previousState:_.value}),k.value!==a&&(k.value=a,console.log("Spotify auth state updated:",a)),a&&!P.isPlayerReady()&&(console.log("Initializing player after auth check"),P.initializePlayerIfReady())}async function V(){console.log("🔄 Re-authorizing Spotify with updated permissions"),await P.forceReauth(),B()}return oe(()=>{l.gamePhase==="setup"&&l.players.length===0&&H.push("/"),B();const a=setInterval(()=>{k.value||B()},12e4);te(()=>{clearInterval(a)})}),(a,g)=>{var F,O,G,U,K;return n(),u("div",fo,[e("header",bo,[e("div",ho,[e("div",yo,[e("button",{onClick:g[0]||(g[0]=M=>a.$router.push("/")),class:"btn btn-secondary"}," ← "+s(a.$t("common.back")),1),e("div",ko,[e("h1",xo,s(a.$t("game.title")),1),e("div",$o,[e("span",null,s(a.$t("game.round"))+" "+s(d.value),1),A.value.theme?(n(),u("span",wo," 🎵 "+s(a.$t(`game.themes.${A.value.theme}`)),1)):(n(),u("span",_o," 🎵 "+s(a.$t("game.allMusic")),1))])])]),e("div",To,[e("p",Po,s(a.$t("game.turn.currentPlayer",{player:(F=C.value)==null?void 0:F.name})),1)])])]),e("main",Co,[X.value==="setup"?(n(),u("div",So,[e("div",Mo,[e("h2",zo,s(a.$t("game.setupRequired")),1),e("p",jo,s(a.$t("game.setupMessage")),1),e("button",{onClick:g[1]||(g[1]=M=>a.$router.push("/")),class:"btn btn-primary"},s(a.$t("game.backToSetup")),1)])])):X.value==="playing"?(n(),u("div",Ao,[e("div",Do,[e("h2",Bo,s(a.$t("game.turn.currentPlayer",{player:(O=C.value)==null?void 0:O.name})),1),e("p",Io,s(a.$t("game.turn.ready")),1),!N.value&&!j.value?(n(),u("div",Ro,[e("button",{onClick:J,class:"btn btn-primary btn-lg"}," 🎵 "+s(a.$t("game.getTrack")),1)])):b("",!0),j.value?(n(),u("div",Lo,[e("div",No,[g[3]||(g[3]=e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-green-500"},null,-1)),e("span",null,s(a.$t("common.loading")),1)])])):b("",!0)]),_.value?_.value&&m.value?(n(),u("div",Yo,[e("div",{class:"flex items-center space-x-3"},[g[5]||(g[5]=ue('<div class="flex-shrink-0"><svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z"></path></svg></div><div class="flex-1"><h3 class="text-lg font-semibold text-orange-800">Playback Permissions Needed</h3><p class="text-orange-700 text-sm">Your Spotify connection needs updated permissions to play music.</p></div>',2)),e("div",{class:"flex space-x-2"},[e("button",{onClick:V,class:"btn btn-sm bg-orange-600 hover:bg-orange-700 text-white"}," 🔐 Update Permissions ")])])])):b("",!0):(n(),u("div",Fo,[e("div",Eo,[g[4]||(g[4]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 18.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",Vo,[e("h3",Oo,s(a.$t("game.spotify.notConnected")),1),e("p",Ho,s(a.$t("game.demoModeActive")),1)]),e("div",Uo,[e("button",{onClick:S,class:"btn btn-sm bg-yellow-600 hover:bg-yellow-700 text-white"},s(a.$t("game.spotify.login")),1),e("button",{onClick:V,class:"btn btn-sm bg-purple-600 hover:bg-purple-700 text-white"}," 🔐 Re-auth "),e("button",{onClick:B,class:"btn btn-sm bg-blue-600 hover:bg-blue-700 text-white"}," 🔄 Refresh ")])])])),N.value?(n(),pe(pt,{key:2,track:N.value,onPlaceTrack:r},null,8,["track"])):b("",!0),C.value&&C.value.timeline?(n(),u("div",Xo,[ve(vo,{player:C.value,"is-current":!0,"current-track":N.value,"can-place":!!N.value,onPlaceTrack:r,onUseToken:i},null,8,["player","current-track","can-place"])])):b("",!0),e("div",qo,[e("h3",Go,s(a.$t("game.score.title")),1),e("div",Zo,[(n(!0),u(se,null,re(I.value,M=>{var E;return n(),u("div",{key:M.id,class:D(["text-center p-3 rounded-lg",M.id===((E=C.value)==null?void 0:E.id)?"bg-green-100 border-2 border-green-300":"bg-gray-50"])},[e("p",Jo,s(M.name),1),e("p",Ko,s(M.tokens),1),e("p",Wo,s(a.$t("game.score.tokens",{count:M.tokens})),1),e("p",Qo,s(a.$t("game.score.total",{score:M.score})),1)],2)}),128))])])])):X.value==="finished"?(n(),u("div",es,[e("div",ts,[e("h2",os,s(a.$t("game.end.title")),1),e("p",ss,s(a.$t("game.end.winner",{player:(G=R.value)==null?void 0:G.name,score:((K=(U=R.value)==null?void 0:U.timeline)==null?void 0:K.length)||0})),1),e("div",rs,[e("h3",as,s(a.$t("game.end.finalScores")),1),e("div",ls,[(n(!0),u(se,null,re(Q.value,(M,E)=>{var t;return n(),u("div",{key:M.id,class:D(["flex justify-between items-center p-3 rounded-lg",E===0?"bg-yellow-100":"bg-gray-50"])},[e("span",ns,s(E+1)+". "+s(M.name),1),e("span",is,s(((t=M.timeline)==null?void 0:t.length)||0)+" "+s(a.$t("game.songs"))+" | "+s(M.tokens)+" "+s(a.$t("game.score.tokens",{count:M.tokens})),1)],2)}),128))])]),e("div",us,[e("button",{onClick:x,class:"btn btn-primary"}," 🔄 "+s(a.$t("game.end.playAgain")),1),e("button",{onClick:g[2]||(g[2]=M=>a.$router.push("/")),class:"btn btn-secondary"}," 🏠 "+s(a.$t("game.backToHome")),1)])])])):b("",!0)]),c.value?(n(),u("div",ds,[e("div",cs,[g[7]||(g[7]=e("div",{class:"absolute inset-0 opacity-10"},[e("div",{class:"absolute top-0 left-0 w-32 h-32 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-full blur-3xl animate-pulse"}),e("div",{class:"absolute bottom-0 right-0 w-40 h-40 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full blur-3xl animate-pulse delay-1000"})],-1)),e("div",gs,[e("div",ms,[g[6]||(g[6]=e("div",{class:"w-12 h-12 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg"},[e("span",{class:"text-2xl"},"💡")],-1)),e("h3",ps,s(a.$t("game.tokens.hint.label")),1)]),e("div",vs,[e("p",fs,s(h.value),1)]),e("div",bs,[e("button",{onClick:T,class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold rounded-xl transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-purple-500/25"},s(a.$t("common.close")),1)])])])])):b("",!0)])}}});export{ys as default};
