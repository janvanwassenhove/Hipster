import{d as U,m as W,r as v,c as m,s as h,o as G,n as X,w as J,p as Y,a as n,e,b as p,q as Z,t as a,x as q,f as K,y as z,k as l,g as T,F as O,i as H,u as Q,j as ee,z as te,A as oe}from"./index-C8mk1Whc.js";const se={class:"card relative overflow-hidden bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 border border-purple-500/20 shadow-2xl shadow-purple-500/10"},re={class:"relative z-10 flex flex-col md:flex-row items-center space-y-6 md:space-y-0 md:space-x-8 p-6"},ae={class:"flex-shrink-0"},le={key:0,class:"relative group"},ne={key:1,class:"relative group"},ie=["src","alt"],de={class:"flex-1 text-center md:text-left"},ue={class:"mb-6"},ce={class:"text-gray-300 font-medium text-lg bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent"},ge={class:"text-sm text-gray-400 mt-2 font-light"},pe={class:"mb-6"},me={key:0,class:"bg-gradient-to-r from-blue-900/50 to-purple-900/50 border border-blue-400/30 rounded-2xl p-6 text-center backdrop-blur-sm"},ve={class:"flex items-center justify-center mb-3"},fe={class:"text-xl font-bold bg-gradient-to-r from-blue-300 to-purple-300 bg-clip-text text-transparent"},he={class:"text-blue-200 mb-4 font-medium"},be={class:"bg-blue-800/30 rounded-xl p-4 border border-blue-500/30"},ye={class:"text-blue-100 text-sm font-medium"},xe={key:1,class:"bg-gradient-to-r from-blue-900/50 to-purple-900/50 border border-blue-400/30 rounded-2xl p-6 text-center backdrop-blur-sm"},ke={class:"flex items-center justify-center mb-3"},we={class:"text-xl font-bold bg-gradient-to-r from-blue-300 to-purple-300 bg-clip-text text-transparent"},$e={class:"text-blue-200 mb-3 font-medium"},_e={class:"text-sm text-blue-300 font-semibold"},Te={class:"text-xs text-blue-400 mt-2 opacity-80"},Pe={key:2,class:"music-player-controls bg-gradient-to-br from-gray-900/80 to-black/80 rounded-2xl p-6 backdrop-blur-sm border border-gray-700/50 shadow-2xl"},Ce={class:"flex items-center justify-center space-x-8 mb-6"},Me=["disabled"],ze=["disabled"],Ae={class:"w-16 h-16 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center shadow-2xl shadow-purple-500/50 group-hover:from-purple-500 group-hover:to-pink-500 transition-all duration-300 group-hover:scale-110 group-hover:shadow-purple-400/60"},je={key:0,class:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"},Se={key:1,class:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20"},De={key:2,class:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20"},Be=["disabled"],Ie={class:"w-12 h-12 bg-gradient-to-br from-gray-800 to-gray-900 rounded-full flex items-center justify-center border border-gray-600/50 shadow-lg group-hover:from-cyan-600 group-hover:to-blue-600 group-hover:border-cyan-400/50 transition-all duration-300 group-hover:scale-110"},Le={key:0,class:"w-5 h-5 text-gray-300 group-hover:text-white transition-colors duration-300",fill:"currentColor",viewBox:"0 0 20 20"},Re={key:1,class:"w-5 h-5 text-gray-300 group-hover:text-white transition-colors duration-300",fill:"currentColor",viewBox:"0 0 20 20"},Ve={key:2,class:"w-5 h-5 text-gray-300 group-hover:text-white transition-colors duration-300",fill:"currentColor",viewBox:"0 0 20 20"},Ne={class:"mb-4"},Fe={class:"flex items-center space-x-4 text-sm text-gray-300"},Ee={class:"w-12 text-right font-mono"},Oe={class:"flex-1 relative"},He={class:"w-12 font-mono"},Ue={class:"flex items-center space-x-4"},Ye={class:"flex-1 relative group"},Xe=["value"],qe={class:"text-sm text-gray-400 w-10 font-mono"},Ge={key:0,class:"p-6 bg-gradient-to-r from-blue-900/40 to-purple-900/40 border border-blue-400/30 rounded-2xl backdrop-blur-sm"},Je={class:"text-center"},Ze={class:"text-2xl font-bold bg-gradient-to-r from-blue-300 to-purple-300 bg-clip-text text-transparent mb-2"},Ke={class:"text-blue-200 text-lg font-medium mb-1"},We={class:"text-blue-300 font-medium"},Qe={class:"text-sm text-blue-400 mt-4"},et=["href"],tt={key:0,class:"mt-6 p-6 bg-gradient-to-r from-purple-900/30 to-pink-900/30 border border-purple-400/30 rounded-2xl backdrop-blur-sm"},ot={class:"text-center"},st={class:"flex items-center justify-center mb-3"},rt={class:"font-bold text-lg bg-gradient-to-r from-purple-300 to-pink-300 bg-clip-text text-transparent"},at={class:"text-purple-200 text-sm font-medium"},lt={class:"flex items-center justify-center mb-3"},nt={key:0,class:"w-12 h-12 bg-gradient-to-br from-cyan-500 to-blue-500 rounded-full flex items-center justify-center mr-3 animate-bounce"},it={key:1,class:"w-12 h-12 bg-gradient-to-br from-red-500 to-pink-500 rounded-full flex items-center justify-center mr-3 animate-pulse"},dt={class:"font-bold text-2xl"},ut={key:0,class:"text-lg mt-2 font-semibold"},ct={class:"bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent"},gt=U({__name:"TrackPlayer",props:{track:{},showAnswer:{type:Boolean,default:!1},showResult:{type:Boolean,default:!1},isCorrect:{type:Boolean,default:!1},pointsEarned:{default:0}},emits:["placeTrack"],setup(B,{emit:A}){const i=B,{t:k}=W(),c=v(!1),g=v(!1);v(!1);const $=v(0),P=v(0),b=v(.7),u=v(!1);v(!1),v(!1);const j=m(()=>{var d,f,M,F;const t=(f=(d=i.track.images)==null?void 0:d[0])==null?void 0:f.url,o=(F=(M=i.track.album.images)==null?void 0:M[0])==null?void 0:F.url;return t||o||"https://via.placeholder.com/300x300/6B7280/FFFFFF?text=No+Image"}),V=m(()=>i.track.artists.map(t=>t.name).join(", ")),I=m(()=>i.showResult?i.isCorrect?"bg-gradient-to-r from-cyan-900/40 to-blue-900/40 border border-cyan-400/30 text-cyan-100":"bg-gradient-to-r from-red-900/40 to-pink-900/40 border border-red-400/30 text-red-100":""),S=m(()=>i.showResult?i.isCorrect?k("game.turn.correct",{year:i.track.year}):k("game.turn.incorrect",{year:i.track.year}):""),L=m(()=>P.value===0?0:$.value/P.value*100),x=m(()=>!!i.track.uri),D=m(()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)),w=m(()=>x.value&&h.isPlayerReady()&&!D.value),_=m(()=>w.value);async function R(){console.log("Toggle playback called, isPlaying:",c.value),console.log("Can play full track:",w.value),console.log("Spotify player ready:",h.isPlayerReady());const t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);w.value&&!t?(await h.getAvailableDevices(),c.value?(await h.pausePlayback(),c.value=!1):await h.playTrack(i.track.uri)?(c.value=!0,C()):console.error("Failed to play track via Spotify")):console.log("Cannot play audio: full track unavailable or mobile device detected")}async function N(){console.log("Restart track called"),w.value&&await h.playTrack(i.track.uri)&&(c.value=!0,C())}function C(){const t=async()=>{if(!w.value)return;const o=await h.getPlaybackState();o&&(c.value=!o.paused,$.value=o.position/1e3,P.value=o.duration/1e3,c.value&&setTimeout(t,1e3))};t()}function r(t){t.stopPropagation()}function s(t){if(isNaN(t))return"0:00";const o=Math.floor(t/60),d=Math.floor(t%60);return`${o}:${d.toString().padStart(2,"0")}`}return G(()=>{h.isAuthenticated()&&X(()=>{h.initializePlayerIfReady()})}),J(()=>i.track,async(t,o)=>{if(t&&t!==o){console.log("New track detected:",t.name),await X(),c.value=!1;const d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);setTimeout(async()=>{if(console.log("Checking if auto-playback can start:",{canPlayAudio:_.value,canPlayFullTrack:w.value,hasSpotifyUri:x.value,isPlayerReady:h.isPlayerReady(),isPlaying:c.value}),_.value&&!c.value){console.log("Auto-starting playback for new track:",t.name);try{await R(),console.log("✅ Auto-playback started successfully")}catch(f){d?console.log("🔇 Auto-playback blocked on mobile - user interaction required"):console.error("❌ Auto-playback failed:",f)}}else{const f=_.value?"Already playing":"No audio source available";console.log(`Cannot auto-start playback: ${f}`),!d&&x.value&&console.log("Has Spotify URI - playback will use Spotify Web Playback SDK")}},300)}},{immediate:!1}),Y(()=>{w.value&&h.stopPlayback()}),(t,o)=>(l(),n("div",se,[o[22]||(o[22]=e("div",{class:"absolute inset-0 opacity-10"},[e("div",{class:"absolute top-0 left-0 w-72 h-72 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full blur-3xl animate-pulse"}),e("div",{class:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-full blur-3xl animate-pulse delay-1000"})],-1)),e("div",re,[e("div",ae,[t.showAnswer?(l(),n("div",ne,[e("img",{src:j.value,alt:t.track.name,class:"w-40 h-40 rounded-2xl shadow-2xl object-cover border border-gray-700/50 backdrop-blur-sm transform group-hover:scale-105 transition-transform duration-300"},null,8,ie),o[7]||(o[7]=e("div",{class:"absolute inset-0 w-40 h-40 rounded-2xl bg-gradient-to-br from-cyan-500/20 to-blue-500/20 blur-xl group-hover:blur-2xl transition-all duration-300"},null,-1))])):(l(),n("div",le,o[6]||(o[6]=[Z('<div class="w-40 h-40 rounded-2xl shadow-2xl bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center border border-gray-700/50 backdrop-blur-sm" data-v-ba865a0b><div class="w-32 h-32 rounded-full bg-gradient-to-br from-gray-900 to-black shadow-inner flex items-center justify-center" data-v-ba865a0b><div class="w-20 h-20 rounded-full bg-gradient-to-br from-gray-800 to-gray-900 shadow-inner flex items-center justify-center" data-v-ba865a0b><svg class="w-12 h-12 text-gray-400 animate-spin-slow" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-ba865a0b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" data-v-ba865a0b></path></svg></div></div></div><div class="absolute inset-0 w-40 h-40 rounded-2xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 blur-xl group-hover:blur-2xl transition-all duration-300" data-v-ba865a0b></div>',2)])))]),e("div",de,[e("div",ue,[e("p",ce,a(t.$t("game.turn.listening")),1),e("p",ge,a(t.$t("game.turn.placeOnTimeline")),1)]),e("div",pe,[!_.value&&D.value&&x.value?(l(),n("div",me,[e("div",ve,[o[8]||(o[8]=e("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mr-3 shadow-lg"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})])],-1)),e("h3",fe,a(t.$t("game.mobileListening")),1)]),e("p",he,a(t.$t("game.mobileGameMode")),1),e("div",be,[e("p",ye,a(t.$t("game.listenCarefully")),1)])])):w.value?p("",!0):(l(),n("div",xe,[e("div",ke,[o[9]||(o[9]=e("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mr-3 shadow-lg"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})])],-1)),e("h3",we,a(x.value?t.$t("game.premiumRequired"):t.$t("game.demoMode")),1)]),e("p",$e,a(x.value?t.$t("game.needsPremium"):t.$t("game.noPreview")),1),e("p",_e,[e("strong",null,a(x.value?t.$t("game.premiumNeededForFullPlay"):t.$t("game.needSpotifyForAudio")),1)]),e("p",Te,a(t.$t("game.demoModeInstructions")),1)])),_.value?(l(),n("div",Pe,[e("div",Ce,[e("button",{onClick:N,class:"control-btn group relative",disabled:!_.value,title:"Restart"},o[10]||(o[10]=[e("div",{class:"w-12 h-12 bg-gradient-to-br from-gray-800 to-gray-900 rounded-full flex items-center justify-center border border-gray-600/50 shadow-lg group-hover:from-purple-600 group-hover:to-pink-600 group-hover:border-purple-400/50 transition-all duration-300 group-hover:scale-110"},[e("svg",{class:"w-5 h-5 text-gray-300 group-hover:text-white transition-colors duration-300",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})])],-1)]),8,Me),e("button",{onClick:R,class:"play-btn group relative",disabled:!_.value},[e("div",Ae,[g.value?(l(),n("div",je)):c.value?(l(),n("svg",Se,o[11]||(o[11]=[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(l(),n("svg",De,o[12]||(o[12]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"},null,-1)])))])],8,ze),e("button",{onClick:o[0]||(o[0]=(...d)=>t.toggleMute&&t.toggleMute(...d)),class:"control-btn group relative",disabled:!_.value,title:"Mute/Unmute"},[e("div",Ie,[u.value||b.value===0?(l(),n("svg",Le,o[13]||(o[13]=[e("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.83 13.6H2a1 1 0 01-1-1V7.4a1 1 0 011-1h2.83l3.553-3.193a1 1 0 011.617.793zM16 8.4A1 1 0 1117.6 7a4 4 0 010 6 1 1 0 11-1.6-1.2 2 2 0 000-3.6z","clip-rule":"evenodd"},null,-1),e("path",{d:"M18.293 6.293a1 1 0 011.414 1.414L17.414 10l2.293 2.293a1 1 0 01-1.414 1.414L16 11.414l-2.293 2.293a1 1 0 01-1.414-1.414L14.586 10l-2.293-2.293a1 1 0 011.414-1.414L16 8.586l2.293-2.293z"},null,-1)]))):b.value<.5?(l(),n("svg",Re,o[14]||(o[14]=[e("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.83 13.6H2a1 1 0 01-1-1V7.4a1 1 0 011-1h2.83l3.553-3.193a1 1 0 011.617.793zM15 8.4A1 1 0 1116.6 7a2 2 0 010 6 1 1 0 11-1.6-1.2V8.4z","clip-rule":"evenodd"},null,-1)]))):(l(),n("svg",Ve,o[15]||(o[15]=[e("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.83 13.6H2a1 1 0 01-1-1V7.4a1 1 0 011-1h2.83l3.553-3.193a1 1 0 011.617.793zM15 8.4A1 1 0 1116.6 7a4 4 0 010 6 1 1 0 11-1.6-1.2 2 2 0 000-3.6z","clip-rule":"evenodd"},null,-1)])))])],8,Be)]),e("div",Ne,[e("div",Fe,[e("span",Ee,a(s($.value)),1),e("div",Oe,[e("div",{class:"progress-track relative h-2 bg-gradient-to-r from-gray-800 to-gray-700 rounded-full cursor-pointer group overflow-hidden",onClick:o[1]||(o[1]=d=>t.seekTo(d)),onTouchstart:o[2]||(o[2]=d=>t.startProgressDrag(d)),onTouchmove:o[3]||(o[3]=d=>t.updateProgressDrag(d)),onTouchend:o[4]||(o[4]=d=>t.endProgressDrag(d))},[o[16]||(o[16]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full blur-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),e("div",{class:"progress-fill absolute top-0 left-0 h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full shadow-lg transition-all duration-150 ease-out",style:q({width:L.value+"%"})},null,4),e("div",{class:"progress-handle absolute top-1/2 w-4 h-4 bg-white rounded-full shadow-lg transform -translate-y-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:q({left:L.value+"%"})},null,4)],32)]),e("span",He,a(s(P.value)),1)])]),e("div",Ue,[o[17]||(o[17]=e("svg",{class:"w-5 h-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.83 13.6H2a1 1 0 01-1-1V7.4a1 1 0 011-1h2.83l3.553-3.193a1 1 0 011.617.793z","clip-rule":"evenodd"})],-1)),e("div",Ye,[e("input",{type:"range",min:"0",max:"1",step:"0.1",value:b.value,onInput:o[5]||(o[5]=(...d)=>t.updateVolume&&t.updateVolume(...d)),onTouchstart:r,onTouchmove:r,onTouchend:r,class:"volume-slider w-full h-2 bg-gradient-to-r from-gray-800 to-gray-700 rounded-full appearance-none cursor-pointer slider-thumb",disabled:!1},null,40,Xe)]),e("span",qe,a(Math.round(b.value*100))+"%",1)])])):p("",!0)]),t.showAnswer?(l(),n("div",Ge,[e("div",Je,[e("h4",Ze,a(t.track.name),1),e("p",Ke,a(V.value),1),e("p",We,a(t.track.album.name)+" ("+a(t.track.year)+")",1),e("p",Qe,[e("a",{href:t.track.external_urls.spotify,target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-green-600 to-green-500 text-white rounded-full hover:from-green-500 hover:to-green-400 transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-green-500/25"},[o[18]||(o[18]=e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"})],-1)),K(" "+a(t.$t("game.openInSpotify")),1)],8,et)])])])):p("",!0)])]),t.showAnswer?p("",!0):(l(),n("div",tt,[e("div",ot,[e("div",st,[o[19]||(o[19]=e("div",{class:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center mr-3 animate-pulse"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("p",rt,a(t.$t("game.turn.placing")),1)]),e("p",at,a(t.$t("game.dragToTimeline")),1)])])),t.showResult?(l(),n("div",{key:1,class:z(["mt-6 p-6 rounded-2xl text-center backdrop-blur-sm",I.value])},[e("div",lt,[t.isCorrect?(l(),n("div",nt,o[20]||(o[20]=[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]))):(l(),n("div",it,o[21]||(o[21]=[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))),e("p",dt,a(S.value),1)]),t.pointsEarned>0?(l(),n("p",ut,[e("span",ct,a(t.$t("game.turn.points",{points:t.pointsEarned})),1)])):p("",!0)],2)):p("",!0)]))}}),pt=(B,A)=>{const i=B.__vccOpts||B;for(const[k,c]of A)i[k]=c;return i},mt=pt(gt,[["__scopeId","data-v-ba865a0b"]]),vt={key:0,class:"absolute inset-0 opacity-10"},ft={class:"relative z-10"},ht={class:"flex items-center justify-between mb-6"},bt={class:"text-xl font-bold flex items-center space-x-3"},yt={key:0,class:"text-2xl animate-bounce"},xt={class:"text-right"},kt={class:"text-3xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent"},wt={class:"flex items-center space-x-2 text-sm text-gray-300"},$t={class:"font-medium"},_t={key:0,class:"mb-6"},Tt={class:"text-sm font-medium text-gray-300 mb-3"},Pt={class:"flex space-x-3"},Ct=["title"],Mt={class:"flex items-center space-x-2"},zt=["title"],At={class:"flex items-center space-x-2"},jt={class:"mb-6"},St={class:"text-lg font-semibold text-gray-200 mb-4 flex items-center"},Dt={key:0,class:"text-center py-12 text-gray-400"},Bt={class:"text-lg font-medium mb-2"},It={class:"p-8 border-2 border-dashed border-gray-500 rounded-2xl group-hover:border-purple-400 transition-colors duration-300 bg-gradient-to-br from-gray-800/30 to-gray-900/30 backdrop-blur-sm"},Lt={class:"text-center text-gray-300 font-medium"},Rt={key:1,class:"space-y-3"},Vt={class:"h-full border-2 border-dashed border-gray-600 rounded-xl group-hover:border-cyan-400 transition-colors duration-300 bg-gradient-to-r from-gray-800/20 to-gray-700/20 backdrop-blur-sm flex items-center justify-center"},Nt={class:"text-center text-gray-400 text-sm font-medium"},Ft={class:"p-4 bg-gradient-to-r from-gray-800/60 to-gray-900/60 backdrop-blur-sm border border-gray-600/30 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]"},Et={class:"flex items-center space-x-4"},Ot={class:"w-16 h-16 rounded-xl overflow-hidden flex-shrink-0 relative group-hover:scale-105 transition-transform duration-300"},Ht=["src","alt"],Ut={key:1,class:"w-16 h-16 bg-gradient-to-br from-gray-700 to-gray-800 flex items-center justify-center"},Yt={class:"flex-1 min-w-0"},Xt={class:"font-bold text-lg text-gray-100 truncate"},qt={class:"text-sm text-gray-300 truncate font-medium"},Gt={class:"text-right flex-shrink-0"},Jt={class:"font-bold text-2xl bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent"},Zt=["onDragover","onDragleave","onDrop","data-drop-zone"],Kt={class:"h-full border-2 border-dashed border-gray-600 rounded-xl group-hover:border-purple-400 transition-colors duration-300 bg-gradient-to-r from-gray-800/20 to-gray-700/20 backdrop-blur-sm flex items-center justify-center"},Wt={class:"text-center text-gray-400 text-sm font-medium"},Qt=["data-drop-zone"],eo={class:"h-full border-2 border-dashed border-gray-600 rounded-xl group-hover:border-cyan-400 transition-colors duration-300 bg-gradient-to-r from-gray-800/20 to-gray-700/20 backdrop-blur-sm flex items-center justify-center"},to={class:"text-center text-gray-400 text-sm font-medium"},oo={class:"flex items-center space-x-4"},so={class:"flex-1 min-w-0"},ro={class:"font-bold text-lg text-blue-200"},ao={class:"text-sm text-blue-300 font-medium"},lo={key:2,class:"mt-6 pt-6 border-t border-gray-600/30"},no={class:"flex justify-between text-sm text-gray-300"},io={class:"font-medium"},uo={key:0,class:"font-mono"},co=U({__name:"PlayerTimeline",props:{player:{},isCurrent:{type:Boolean},currentTrack:{},canPlace:{type:Boolean}},emits:["placeTrack","useToken"],setup(B,{emit:A}){const i=B,k=A,c=v(!1),g=v([]),$=v(!1),P=v({x:0,y:0}),b=v({x:0,y:0}),u=v(null),j=m(()=>{if(i.player.timeline.length<2)return null;const r=i.player.timeline.map(s=>s.year).sort((s,t)=>s-t);return`${r[0]} - ${r[r.length-1]}`});function V(r){var s,t,o,d;return((t=(s=r.images)==null?void 0:s[0])==null?void 0:t.url)||((d=(o=r.album.images)==null?void 0:o[0])==null?void 0:d.url)||"/placeholder-album.png"}function I(r){return r.artists.map(s=>s.name).join(", ")}function S(r){var t;if(!i.currentTrack)return;(t=r.dataTransfer)==null||t.setData("text/plain",JSON.stringify(i.currentTrack)),r.target.classList.add("dragging")}function L(r){r.target.classList.remove("dragging"),c.value=!1,g.value=[]}function x(r){!i.currentTrack||!i.canPlace||(c.value=!1,g.value=[],k("placeTrack",i.currentTrack,r))}function D(r){k("useToken",r)}function w(r){if(!(!i.currentTrack||!i.canPlace))try{r.preventDefault(),$.value=!0;const s=r.touches[0];if(!s)return;P.value={x:s.clientX,y:s.clientY},b.value={x:s.clientX,y:s.clientY};const t=r.target,o=t.getBoundingClientRect();u.value=t.cloneNode(!0),u.value.style.position="fixed",u.value.style.top=`${o.top}px`,u.value.style.left=`${o.left}px`,u.value.style.width=`${o.width}px`,u.value.style.height=`${o.height}px`,u.value.style.zIndex="9999",u.value.style.opacity="0.8",u.value.style.transform="rotate(2deg)",u.value.style.pointerEvents="none",u.value.classList.add("dragging"),document.body.appendChild(u.value),t.classList.add("dragging"),"vibrate"in navigator&&navigator.vibrate(50)}catch(s){console.warn("Touch start error:",s),C()}}function _(r){if(!(!$.value||!u.value))try{r.preventDefault();const s=r.touches[0];if(!s)return;b.value={x:s.clientX,y:s.clientY};const t=50,o=50;u.value.style.left=`${s.clientX-t}px`,u.value.style.top=`${s.clientY-o}px`;const d=document.elementFromPoint(s.clientX,s.clientY),f=d==null?void 0:d.closest("[data-drop-zone]");if(c.value=!1,g.value.fill(!1),f){const M=parseInt(f.getAttribute("data-drop-zone")||"0");M===0?c.value=!0:M<=g.value.length&&(g.value[M]=!0)}}catch(s){console.warn("Touch move error:",s)}}function R(r){if($.value)try{r.preventDefault(),$.value=!1;const s=r.changedTouches[0];if(!s){C();return}const t=document.elementFromPoint(s.clientX,s.clientY),o=t==null?void 0:t.closest("[data-drop-zone]");u.value&&(u.value.style.transition="opacity 0.2s ease-out",u.value.style.opacity="0",setTimeout(()=>{u.value&&document.body.contains(u.value)&&document.body.removeChild(u.value),u.value=null},200));const d=document.querySelector(".dragging");if(d&&d.classList.remove("dragging"),c.value=!1,g.value.fill(!1),o&&i.currentTrack){const f=parseInt(o.getAttribute("data-drop-zone")||"0");"vibrate"in navigator&&navigator.vibrate(100),k("placeTrack",i.currentTrack,f)}}catch(s){console.warn("Touch end error:",s),C()}}function N(){g.value=new Array(i.player.timeline.length+1).fill(!1)}function C(){$.value=!1,c.value=!1,g.value.fill(!1),u.value&&document.body.contains(u.value)&&(document.body.removeChild(u.value),u.value=null),document.querySelectorAll(".dragging").forEach(s=>s.classList.remove("dragging"))}return Y(()=>{C()}),J(()=>i.player.timeline.length,()=>{N()},{immediate:!0}),(r,s)=>(l(),n("div",{class:z(["card relative overflow-hidden",{"ring-2 ring-cyan-400 shadow-2xl shadow-cyan-400/20":r.isCurrent}])},[r.isCurrent?(l(),n("div",vt,s[11]||(s[11]=[e("div",{class:"absolute top-0 left-0 w-64 h-64 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-full blur-3xl animate-pulse"},null,-1),e("div",{class:"absolute bottom-0 right-0 w-80 h-80 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full blur-3xl animate-pulse delay-1000"},null,-1)]))):p("",!0),e("div",ft,[e("div",ht,[e("h3",bt,[e("span",{class:z(r.isCurrent?"bg-gradient-to-r from-cyan-300 to-blue-300 bg-clip-text text-transparent":"text-gray-200")},a(r.player.name),3),r.isCurrent?(l(),n("span",yt,"👑")):p("",!0)]),e("div",xt,[e("p",kt,a(r.player.score),1),e("div",wt,[s[12]||(s[12]=e("span",{class:"text-lg"},"🎵",-1)),e("span",$t,a(r.$t("game.score.tokens",{count:r.player.tokens})),1)])])]),r.isCurrent&&r.canPlace&&r.player.tokens>0?(l(),n("div",_t,[e("h4",Tt,a(r.$t("game.tokenAbilities")),1),e("div",Pt,[e("button",{onClick:s[0]||(s[0]=t=>D("skip")),class:"group relative px-4 py-2 bg-gradient-to-r from-orange-600 to-pink-600 hover:from-orange-500 hover:to-pink-500 text-white rounded-xl font-medium transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-orange-500/25",title:r.$t("game.tokens.skip.description")},[e("div",Mt,[s[13]||(s[13]=e("span",{class:"text-lg"},"⏭️",-1)),e("span",null,a(r.$t("game.tokens.skip.label")),1)])],8,Ct),e("button",{onClick:s[1]||(s[1]=t=>D("hint")),class:"group relative px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white rounded-xl font-medium transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-cyan-500/25",title:r.$t("game.tokens.hint.description")},[e("div",At,[s[14]||(s[14]=e("span",{class:"text-lg"},"💡",-1)),e("span",null,a(r.$t("game.tokens.hint.label")),1)])],8,zt)])])):p("",!0),e("div",jt,[e("h4",St,[s[15]||(s[15]=e("span",{class:"mr-2"},"🎵",-1)),K(" "+a(r.$t("game.timeline.title")),1)]),r.player.timeline.length===0?(l(),n("div",Dt,[s[16]||(s[16]=e("div",{class:"mb-4"},[e("div",{class:"w-20 h-20 mx-auto bg-gradient-to-br from-gray-700 to-gray-800 rounded-full flex items-center justify-center shadow-lg"},[e("span",{class:"text-3xl"},"🎼")])],-1)),e("p",Bt,a(r.$t("game.timeline.empty")),1),r.canPlace?(l(),n("div",{key:0,class:z(["timeline-slot mt-6 group",{"drag-over":c.value}]),onDragover:s[2]||(s[2]=T(t=>c.value=!0,["prevent"])),onDragleave:s[3]||(s[3]=T(t=>c.value=!1,["prevent"])),onDrop:s[4]||(s[4]=T(t=>x(0),["prevent"])),"data-drop-zone":0},[e("div",It,[e("p",Lt,a(r.$t("game.timeline.placeHere")),1)])],34)):p("",!0)])):(l(),n("div",Rt,[r.canPlace?(l(),n("div",{key:0,class:z(["timeline-slot h-20 group",{"drag-over":g.value[0]}]),onDragover:s[5]||(s[5]=T(t=>g.value[0]=!0,["prevent"])),onDragleave:s[6]||(s[6]=T(t=>g.value[0]=!1,["prevent"])),onDrop:s[7]||(s[7]=T(t=>x(0),["prevent"])),"data-drop-zone":0},[e("div",Vt,[e("p",Nt,a(r.$t("game.placeEarlier")),1)])],34)):p("",!0),(l(!0),n(O,null,H(r.player.timeline,(t,o)=>(l(),n("div",{key:t.id,class:"track-card group relative"},[e("div",Ft,[e("div",Et,[e("div",Ot,[t.revealed?(l(),n("img",{key:0,src:V(t),alt:t.name,class:"w-16 h-16 object-cover"},null,8,Ht)):(l(),n("div",Ut,s[17]||(s[17]=[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})],-1)])))]),e("div",Yt,[e("p",Xt,a(t.name),1),e("p",qt,a(I(t)),1)]),e("div",Gt,[e("p",Jt,a(t.year),1)])])]),r.canPlace&&o<r.player.timeline.length-1?(l(),n("div",{key:0,class:z(["timeline-slot h-20 mt-3 group",{"drag-over":g.value[o+1]}]),onDragover:T(d=>g.value[o+1]=!0,["prevent"]),onDragleave:T(d=>g.value[o+1]=!1,["prevent"]),onDrop:T(d=>x(o+1),["prevent"]),"data-drop-zone":o+1},[e("div",Kt,[e("p",Wt,a(r.$t("game.placeBetween")),1)])],42,Zt)):p("",!0)]))),128)),r.canPlace?(l(),n("div",{key:1,class:z(["timeline-slot h-20 group",{"drag-over":g.value[r.player.timeline.length]}]),onDragover:s[8]||(s[8]=T(t=>g.value[r.player.timeline.length]=!0,["prevent"])),onDragleave:s[9]||(s[9]=T(t=>g.value[r.player.timeline.length]=!1,["prevent"])),onDrop:s[10]||(s[10]=T(t=>x(r.player.timeline.length),["prevent"])),"data-drop-zone":r.player.timeline.length},[e("div",eo,[e("p",to,a(r.$t("game.placeLater")),1)])],42,Qt)):p("",!0)]))]),r.canPlace&&r.currentTrack?(l(),n("div",{key:1,class:"p-6 bg-gradient-to-r from-blue-900/50 to-purple-900/50 border-2 border-blue-400/30 rounded-2xl cursor-move touch-manipulation select-none backdrop-blur-sm shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",draggable:"true",onDragstart:S,onDragend:L,onTouchstart:w,onTouchmove:_,onTouchend:R,style:{touchAction:"none"}},[e("div",oo,[s[18]||(s[18]=e("div",{class:"w-16 h-16 rounded-xl bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center flex-shrink-0 shadow-lg"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})])],-1)),e("div",so,[e("p",ro,a(r.$t("game.newTrack")),1),e("p",ao,a(r.$t("game.dragToPlace")),1)]),s[19]||(s[19]=e("div",{class:"text-blue-300"},[e("span",{class:"text-3xl animate-pulse"},"🎵")],-1))])],32)):p("",!0),r.player.timeline.length>0?(l(),n("div",lo,[e("div",no,[e("span",io,a(r.$t("game.tracksInTimeline",{count:r.player.timeline.length})),1),j.value?(l(),n("span",uo,a(j.value),1)):p("",!0)])])):p("",!0)])],2))}}),go={class:"min-h-screen flex flex-col"},po={class:"bg-white/10 backdrop-blur-sm p-4"},mo={class:"flex justify-between items-center"},vo={class:"flex items-center space-x-4"},fo={class:"text-white"},ho={class:"text-xl font-bold"},bo={class:"text-sm opacity-80"},yo={class:"text-white text-right"},xo={class:"text-sm opacity-80"},ko={class:"flex-1 container mx-auto px-4 py-6"},wo={key:0,class:"max-w-2xl mx-auto"},$o={class:"card text-center"},_o={class:"text-2xl font-semibold mb-4"},To={class:"text-gray-600 mb-6"},Po={key:1,class:"space-y-6"},Co={class:"card text-center bg-green-50 border-green-200"},Mo={class:"text-2xl font-bold text-green-800 mb-2"},zo={class:"text-green-700"},Ao={key:0,class:"mt-4"},jo={key:1,class:"mt-4"},So={class:"flex items-center justify-center space-x-2"},Do={key:0,class:"card bg-yellow-50 border-yellow-200"},Bo={class:"flex items-center space-x-3"},Io={class:"flex-1"},Lo={class:"text-lg font-semibold text-yellow-800"},Ro={class:"text-yellow-700 text-sm"},Vo={class:"flex space-x-2"},No={key:1,class:"card bg-orange-50 border-orange-200"},Fo={key:3,class:"max-w-4xl mx-auto"},Eo={class:"card"},Oo={class:"text-lg font-semibold mb-4"},Ho={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Uo={class:"font-semibold"},Yo={class:"text-2xl font-bold text-green-600"},Xo={class:"text-sm text-gray-600"},qo={class:"text-xs text-gray-500"},Go={key:2,class:"max-w-2xl mx-auto"},Jo={class:"card text-center"},Zo={class:"text-3xl font-bold mb-4 text-green-600"},Ko={class:"text-xl mb-6"},Wo={class:"mb-6"},Qo={class:"text-lg font-semibold mb-3"},es={class:"space-y-2"},ts={class:"font-medium"},os={class:"font-bold"},ss={class:"flex space-x-4 justify-center"},rs={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},as={class:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 border border-purple-500/20 shadow-2xl shadow-purple-500/10 rounded-2xl p-8 max-w-md w-full mx-auto relative overflow-hidden"},ls={class:"relative z-10"},ns={class:"flex items-center space-x-3 mb-6"},is={class:"text-2xl font-bold bg-gradient-to-r from-cyan-300 to-blue-300 bg-clip-text text-transparent"},ds={class:"mb-8"},us={class:"text-gray-200 text-lg leading-relaxed"},cs={class:"flex justify-center"},ps=U({__name:"GameView",setup(B){const A=ee(),i=Q(),k=v(!1),c=v(!1),g=v(""),$=v(h.isAuthenticated()),P=m(()=>i.players),b=m(()=>i.currentPlayer),u=m(()=>i.currentTrack),j=m(()=>i.gamePhase),V=m(()=>i.round);m(()=>i.settings);const I=m(()=>i.winner),S=m(()=>$.value),L=m(()=>S.value&&!h.isPlayerReady()),x=m(()=>[...P.value].sort((t,o)=>o.timeline.length!==t.timeline.length?o.timeline.length-t.timeline.length:o.tokens!==t.tokens?o.tokens-t.tokens:o.score-t.score));async function D(){var t;k.value=!0;try{console.log("Loading next track...");const o=await i.getNextTrack();o?console.log("Track loaded successfully:",o.name,"by",(t=o.artists[0])==null?void 0:t.name):console.error("No tracks available")}catch(o){console.error("Error loading track:",o)}finally{k.value=!1}}function w(t,o){i.placeTrackOnTimeline(t,o),setTimeout(()=>{i.nextPlayer()},2e3)}function _(t){var d;if(!b.value)return;if(i.useToken(b.value.id,t))switch(t){case"skip":D();break;case"hint":const f=Math.floor(((d=u.value)==null?void 0:d.year)/10)*10;g.value=`This track was released in the ${f}s`,c.value=!0;break}}function R(){c.value=!1,g.value=""}function N(){i.resetGame(),A.push("/")}function C(){A.push("/")}function r(){const t=h.isAuthenticated(),o=localStorage.getItem("spotify_auth");console.log("Spotify auth check:",{isAuthenticated:t,authStateInStorage:o?JSON.parse(o):null,isSpotifyConnected:S.value}),$.value=t,t&&h.initializePlayerIfReady()}async function s(){console.log("🔄 Re-authorizing Spotify with updated permissions"),await h.forceReauth(),r()}return G(()=>{i.gamePhase==="setup"&&i.players.length===0&&A.push("/"),r();const t=setInterval(()=>{r()},2e3);Y(()=>{clearInterval(t)})}),(t,o)=>{var d,f,M,F;return l(),n("div",go,[e("header",po,[e("div",mo,[e("div",vo,[e("button",{onClick:o[0]||(o[0]=y=>t.$router.push("/")),class:"btn btn-secondary"}," ← "+a(t.$t("common.back")),1),e("div",fo,[e("h1",ho,a(t.$t("game.title")),1),e("p",bo,a(t.$t("game.round"))+" "+a(V.value),1)])]),e("div",yo,[e("p",xo,a(t.$t("game.turn.currentPlayer",{player:(d=b.value)==null?void 0:d.name})),1)])])]),e("main",ko,[j.value==="setup"?(l(),n("div",wo,[e("div",$o,[e("h2",_o,a(t.$t("game.setupRequired")),1),e("p",To,a(t.$t("game.setupMessage")),1),e("button",{onClick:o[1]||(o[1]=y=>t.$router.push("/")),class:"btn btn-primary"},a(t.$t("game.backToSetup")),1)])])):j.value==="playing"?(l(),n("div",Po,[e("div",Co,[e("h2",Mo,a(t.$t("game.turn.currentPlayer",{player:(f=b.value)==null?void 0:f.name})),1),e("p",zo,a(t.$t("game.turn.ready")),1),!u.value&&!k.value?(l(),n("div",Ao,[e("button",{onClick:D,class:"btn btn-primary btn-lg"}," 🎵 "+a(t.$t("game.getTrack")),1)])):p("",!0),k.value?(l(),n("div",jo,[e("div",So,[o[3]||(o[3]=e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-green-500"},null,-1)),e("span",null,a(t.$t("common.loading")),1)])])):p("",!0)]),S.value?S.value&&L.value?(l(),n("div",No,[e("div",{class:"flex items-center space-x-3"},[o[5]||(o[5]=Z('<div class="flex-shrink-0"><svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z"></path></svg></div><div class="flex-1"><h3 class="text-lg font-semibold text-orange-800">Playback Permissions Needed</h3><p class="text-orange-700 text-sm">Your Spotify connection needs updated permissions to play music.</p></div>',2)),e("div",{class:"flex space-x-2"},[e("button",{onClick:s,class:"btn btn-sm bg-orange-600 hover:bg-orange-700 text-white"}," 🔐 Update Permissions ")])])])):p("",!0):(l(),n("div",Do,[e("div",Bo,[o[4]||(o[4]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 18.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",Io,[e("h3",Lo,a(t.$t("game.spotify.notConnected")),1),e("p",Ro,a(t.$t("game.demoModeActive")),1)]),e("div",Vo,[e("button",{onClick:C,class:"btn btn-sm bg-yellow-600 hover:bg-yellow-700 text-white"},a(t.$t("game.spotify.login")),1),e("button",{onClick:s,class:"btn btn-sm bg-purple-600 hover:bg-purple-700 text-white"}," 🔐 Re-auth "),e("button",{onClick:r,class:"btn btn-sm bg-blue-600 hover:bg-blue-700 text-white"}," 🔄 Refresh ")])])])),u.value?(l(),te(mt,{key:2,track:u.value,onPlaceTrack:w},null,8,["track"])):p("",!0),b.value?(l(),n("div",Fo,[oe(co,{player:b.value,"is-current":!0,"current-track":u.value,"can-place":!!u.value,onPlaceTrack:w,onUseToken:_},null,8,["player","current-track","can-place"])])):p("",!0),e("div",Eo,[e("h3",Oo,a(t.$t("game.score.title")),1),e("div",Ho,[(l(!0),n(O,null,H(P.value,y=>{var E;return l(),n("div",{key:y.id,class:z(["text-center p-3 rounded-lg",y.id===((E=b.value)==null?void 0:E.id)?"bg-green-100":"bg-gray-50"])},[e("p",Uo,a(y.name),1),e("p",Yo,a(y.tokens),1),e("p",Xo,a(t.$t("game.score.tokens",{count:y.tokens})),1),e("p",qo,a(t.$t("game.score.total",{score:y.score})),1)],2)}),128))])])])):j.value==="finished"?(l(),n("div",Go,[e("div",Jo,[e("h2",Zo,a(t.$t("game.end.title")),1),e("p",Ko,a(t.$t("game.end.winner",{player:(M=I.value)==null?void 0:M.name,score:(F=I.value)==null?void 0:F.timeline.length})),1),e("div",Wo,[e("h3",Qo,a(t.$t("game.end.finalScores")),1),e("div",es,[(l(!0),n(O,null,H(x.value,(y,E)=>(l(),n("div",{key:y.id,class:z(["flex justify-between items-center p-3 rounded-lg",E===0?"bg-yellow-100":"bg-gray-50"])},[e("span",ts,a(E+1)+". "+a(y.name),1),e("span",os,a(y.timeline.length)+" "+a(t.$t("game.songs"))+" | "+a(y.tokens)+" "+a(t.$t("game.score.tokens",{count:y.tokens})),1)],2))),128))])]),e("div",ss,[e("button",{onClick:N,class:"btn btn-primary"}," 🔄 "+a(t.$t("game.end.playAgain")),1),e("button",{onClick:o[2]||(o[2]=y=>t.$router.push("/")),class:"btn btn-secondary"}," 🏠 "+a(t.$t("game.backToHome")),1)])])])):p("",!0)]),c.value?(l(),n("div",rs,[e("div",as,[o[7]||(o[7]=e("div",{class:"absolute inset-0 opacity-10"},[e("div",{class:"absolute top-0 left-0 w-32 h-32 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-full blur-3xl animate-pulse"}),e("div",{class:"absolute bottom-0 right-0 w-40 h-40 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full blur-3xl animate-pulse delay-1000"})],-1)),e("div",ls,[e("div",ns,[o[6]||(o[6]=e("div",{class:"w-12 h-12 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg"},[e("span",{class:"text-2xl"},"💡")],-1)),e("h3",is,a(t.$t("game.tokens.hint.label")),1)]),e("div",ds,[e("p",us,a(g.value),1)]),e("div",cs,[e("button",{onClick:R,class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold rounded-xl transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-purple-500/25"},a(t.$t("common.close")),1)])])])])):p("",!0)])}}});export{ps as default};
