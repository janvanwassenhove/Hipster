import{d as j,u as M,r as u,c as p,o as U,s as $,w,a as i,b as e,t as s,e as f,f as A,g as L,h as g,v as b,F as R,i as T,j as q,k as r,l as B}from"./index-DbnsnrPs.js";const I={class:"min-h-screen bg-gradient-to-br from-slate-950 via-purple-950 to-slate-900 text-white p-8"},P={class:"p-4 flex justify-between items-center"},D={class:"flex items-center space-x-2"},E={class:"text-3xl font-bold text-white"},F={class:"text-white/80 text-sm"},J={class:"flex-1 container mx-auto px-4 py-8"},O={class:"max-w-2xl mx-auto"},z={key:0,class:"card mb-6 bounce-in"},H={class:"text-2xl font-bold mb-4 text-white"},K={class:"flex justify-between items-center"},Q={class:"text-slate-300 font-medium"},W={class:"text-slate-300 font-medium"},X={class:"card"},Y={class:"text-3xl font-bold mb-8 text-white bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent"},Z={key:0,class:"mb-8 p-6 bg-gradient-to-r from-green-900/40 to-emerald-900/40 border border-green-500/30 rounded-2xl backdrop-blur-sm"},ee={class:"flex items-center space-x-4 mb-4"},te={class:"font-bold text-xl text-white"},se={class:"text-white font-medium"},oe=["disabled"],ae={key:0,class:"flex items-center justify-center"},le={key:1,class:"flex items-center justify-center"},ne={class:"block text-sm font-bold text-slate-200 mb-3"},ie={class:"block text-sm font-bold text-slate-200 mb-3"},re={class:"space-y-3"},ue=["onUpdate:modelValue","placeholder"],de={class:"block text-sm font-bold text-slate-200 mb-3"},me={value:"5"},ce={value:"6"},pe={value:"7"},ge={value:"8"},ve={value:"9"},he={value:"10"},fe={class:"block text-sm font-bold text-slate-200 mb-3"},be={value:""},ye={value:"guilty-pleasures"},_e={value:"belgian"},$e={value:"classics"},we={value:"popular"},xe={value:"vlaams"},ke={value:"pop-rock"},Se=["disabled"],Ce=j({__name:"HomeView",setup(Ne){const y=q(),d=M(),l=u(2),n=u(["","","",""]),v=u(10),h=u(""),m=u(!1),c=u(!1);u("");const x=p(()=>d.players.length>0&&d.gamePhase!=="setup"),k=p(()=>d.players.map(t=>t.name)),S=p(()=>d.round),_=p(()=>{var t;if(!c.value)return!1;for(let o=0;o<l.value;o++)if(!((t=n.value[o])!=null&&t.trim()))return!1;return!0});async function N(){m.value=!0;try{await $.initiateLogin()}catch(t){console.error("Login failed:",t)}finally{m.value=!1}}function V(){if(!_.value)return;const t=n.value.slice(0,l.value).map(o=>o.trim());d.updateSettings({targetSongs:v.value,theme:h.value||void 0,maxRounds:20,targetScore:10}),d.initializePlayers(t),y.push("/game")}function C(){y.push("/game")}return U(()=>{c.value=$.isAuthenticated();const t=localStorage.getItem("hitster-player-names");if(t)try{const o=JSON.parse(t);Array.isArray(o)&&(n.value=[...o,"","","",""].slice(0,4),l.value=Math.max(2,Math.min(4,o.length)))}catch(o){console.error("Error loading saved player names:",o)}}),w(l,t=>{const o=[...n.value];for(;o.length<4;)o.push("");n.value=o},{immediate:!0}),w([n,l],()=>{const t=n.value.slice(0,l.value).filter(o=>o.trim());t.length>0&&localStorage.setItem("hitster-player-names",JSON.stringify(t))},{deep:!0}),(t,o)=>(r(),i("div",I,[e("header",P,[e("div",D,[e("h1",E,s(t.$t("game.title")),1),e("span",F,s(t.$t("game.subtitle")),1)]),e("button",{onClick:o[0]||(o[0]=a=>t.$router.push("/settings")),class:"btn btn-secondary"}," ⚙️ "+s(t.$t("settings.language")),1)]),e("main",J,[e("div",O,[x.value?(r(),i("div",z,[e("h2",H,s(t.$t("game.continue")),1),e("div",K,[e("div",null,[e("p",Q,s(t.$t("game.players"))+": "+s(k.value.join(", ")),1),e("p",W,s(t.$t("game.round"))+": "+s(S.value),1)]),e("button",{onClick:C,class:"btn btn-primary"},s(t.$t("common.continue")),1)])])):f("",!0),e("div",X,[e("h2",Y,s(t.$t("game.newGame")),1),c.value?f("",!0):(r(),i("div",Z,[e("div",ee,[o[4]||(o[4]=e("div",{class:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center"},[e("span",{class:"text-2xl"},"🎵")],-1)),e("div",null,[e("h3",te,s(t.$t("game.spotify.required")),1),e("p",se,s(t.$t("game.spotify.loginRequired")),1)])]),e("button",{onClick:N,disabled:m.value,class:"btn bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white w-full font-bold text-lg py-4 shadow-lg hover:shadow-green-500/25"},[m.value?(r(),i("span",ae,[o[5]||(o[5]=e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"},null,-1)),A(" "+s(t.$t("common.loading")),1)])):(r(),i("span",le," 🎵 "+s(t.$t("game.spotify.login")),1))],8,oe)])),c.value?(r(),i("form",{key:1,onSubmit:L(V,["prevent"]),class:"space-y-6"},[e("div",null,[e("label",ne,s(t.$t("game.playerCount")),1),g(e("select",{"onUpdate:modelValue":o[1]||(o[1]=a=>l.value=a),class:"select"},o[6]||(o[6]=[e("option",{value:2},"2",-1),e("option",{value:3},"3",-1),e("option",{value:4},"4",-1)]),512),[[b,l.value,void 0,{number:!0}]])]),e("div",null,[e("label",ie,s(t.$t("game.playerNames")),1),e("div",re,[(r(!0),i(R,null,T(l.value,a=>g((r(),i("input",{key:`player-${a}`,"onUpdate:modelValue":G=>n.value[a-1]=G,placeholder:t.$t("game.playerName",{number:a}),class:"input",required:"",maxlength:"20"},null,8,ue)),[[B,n.value[a-1]]])),128))])]),e("div",null,[e("label",de,s(t.$t("game.targetSongs")),1),g(e("select",{"onUpdate:modelValue":o[2]||(o[2]=a=>v.value=a),class:"select"},[e("option",me,"5 "+s(t.$t("game.songs")),1),e("option",ce,"6 "+s(t.$t("game.songs")),1),e("option",pe,"7 "+s(t.$t("game.songs")),1),e("option",ge,"8 "+s(t.$t("game.songs")),1),e("option",ve,"9 "+s(t.$t("game.songs")),1),e("option",he,"10 "+s(t.$t("game.songs"))+" ("+s(t.$t("game.default"))+")",1)],512),[[b,v.value]])]),e("div",null,[e("label",fe,s(t.$t("game.theme")),1),g(e("select",{"onUpdate:modelValue":o[3]||(o[3]=a=>h.value=a),class:"select"},[e("option",be,s(t.$t("game.allMusic")),1),e("option",ye,s(t.$t("game.themes.guilty-pleasures")),1),e("option",_e,s(t.$t("game.themes.belgian")),1),e("option",$e,s(t.$t("game.themes.classics")),1),e("option",we,s(t.$t("game.themes.popular")),1),e("option",xe,s(t.$t("game.themes.vlaams")),1),e("option",ke,s(t.$t("game.themes.pop-rock")),1)],512),[[b,h.value]])]),e("button",{type:"submit",disabled:!_.value,class:"btn btn-primary btn-lg w-full"}," 🎮 "+s(t.$t("common.start")),9,Se)],32)):f("",!0)])])])]))}});export{Ce as default};
