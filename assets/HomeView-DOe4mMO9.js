import{d as C,u as M,r as u,c as g,o as U,s as $,w as j,a as l,b as e,t as s,e as y,f as A,g as p,v as f,F as L,h as R,i as q,j as i,k as B}from"./index-Dh6weMDj.js";const I={class:"min-h-screen flex flex-col"},P={class:"p-4 flex justify-between items-center"},T={class:"flex items-center space-x-2"},D={class:"text-3xl font-bold text-white"},E={class:"text-white/80 text-sm"},F={class:"flex-1 container mx-auto px-4 py-8"},J={class:"max-w-2xl mx-auto"},O={key:0,class:"card mb-6 bounce-in"},z={class:"text-xl font-semibold mb-4 text-gray-800"},H={class:"flex justify-between items-center"},K={class:"text-gray-600"},Q={class:"text-gray-600"},W={class:"card"},X={class:"text-2xl font-semibold mb-6 text-gray-800"},Y={key:0,class:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg"},Z={class:"flex items-center space-x-3 mb-3"},ee={class:"font-semibold text-green-800"},te={class:"text-green-700 text-sm"},se=["disabled"],oe={key:0},ae={key:1},ne={class:"block text-sm font-medium text-gray-700 mb-2"},le={class:"block text-sm font-medium text-gray-700 mb-2"},ie={class:"space-y-3"},re=["onUpdate:modelValue","placeholder"],me={class:"block text-sm font-medium text-gray-700 mb-2"},ue={value:"5"},de={value:"6"},ce={value:"7"},ge={value:"8"},pe={value:"9"},he={value:"10"},ve={class:"block text-sm font-medium text-gray-700 mb-2"},ye={value:""},fe={value:"90s"},be={value:"guilty-pleasures"},_e={value:"schlager"},$e={value:"tiktok"},ke={value:"rock"},Se={value:"pop"},we={value:"hip-hop"},xe={value:"electronic"},Ge={value:"indie"},Ne={value:"country"},Ve=["disabled"],Ue=C({__name:"HomeView",setup(Ce){const b=q(),m=M(),n=u(2),r=u(["","","",""]),h=u(10),v=u(""),d=u(!1),c=u(!1),k=g(()=>m.players.length>0&&m.gamePhase!=="setup"),S=g(()=>m.players.map(t=>t.name)),w=g(()=>m.round),_=g(()=>{var t;if(!c.value)return!1;for(let o=0;o<n.value;o++)if(!((t=r.value[o])!=null&&t.trim()))return!1;return!0});async function x(){d.value=!0;try{await $.initiateLogin()}catch(t){console.error("Login failed:",t)}finally{d.value=!1}}function G(){if(!_.value)return;const t=r.value.slice(0,n.value).map(o=>o.trim());m.updateSettings({targetSongs:h.value,theme:v.value||void 0,maxRounds:20,targetScore:10}),m.initializePlayers(t),b.push("/game")}function N(){b.push("/game")}return U(()=>{c.value=$.isAuthenticated();const t=localStorage.getItem("hitster-player-names");if(t)try{const o=JSON.parse(t);Array.isArray(o)&&(r.value=[...o,"","","",""].slice(0,4),n.value=Math.max(2,Math.min(4,o.length)))}catch(o){console.error("Error loading saved player names:",o)}}),j([r,n],()=>{const t=r.value.slice(0,n.value).filter(o=>o.trim());t.length>0&&localStorage.setItem("hitster-player-names",JSON.stringify(t))},{deep:!0}),(t,o)=>(i(),l("div",I,[e("header",P,[e("div",T,[e("h1",D,s(t.$t("game.title")),1),e("span",E,s(t.$t("game.subtitle")),1)]),e("button",{onClick:o[0]||(o[0]=a=>t.$router.push("/settings")),class:"btn btn-secondary"}," ⚙️ "+s(t.$t("settings.language")),1)]),e("main",F,[e("div",J,[k.value?(i(),l("div",O,[e("h2",z,s(t.$t("game.continue")),1),e("div",H,[e("div",null,[e("p",K,s(t.$t("game.players"))+": "+s(S.value.join(", ")),1),e("p",Q,s(t.$t("game.round"))+": "+s(w.value),1)]),e("button",{onClick:N,class:"btn btn-primary"},s(t.$t("common.continue")),1)])])):y("",!0),e("div",W,[e("h2",X,s(t.$t("game.newGame")),1),c.value?y("",!0):(i(),l("div",Y,[e("div",Z,[o[4]||(o[4]=e("span",{class:"text-2xl"},"🎵",-1)),e("div",null,[e("h3",ee,s(t.$t("game.spotify.required")),1),e("p",te,s(t.$t("game.spotify.loginRequired")),1)])]),e("button",{onClick:x,disabled:d.value,class:"btn btn-primary bg-spotify hover:bg-spotify-dark w-full"},[d.value?(i(),l("span",oe,s(t.$t("common.loading")),1)):(i(),l("span",ae,"🎵 "+s(t.$t("game.spotify.login")),1))],8,se)])),c.value?(i(),l("form",{key:1,onSubmit:A(G,["prevent"]),class:"space-y-6"},[e("div",null,[e("label",ne,s(t.$t("game.playerCount")),1),p(e("select",{"onUpdate:modelValue":o[1]||(o[1]=a=>n.value=a),class:"select"},o[5]||(o[5]=[e("option",{value:"2"},"2",-1),e("option",{value:"3"},"3",-1),e("option",{value:"4"},"4",-1)]),512),[[f,n.value]])]),e("div",null,[e("label",le,s(t.$t("game.playerNames")),1),e("div",ie,[(i(!0),l(L,null,R(n.value,a=>p((i(),l("input",{key:a,"onUpdate:modelValue":V=>r.value[a-1]=V,placeholder:t.$t("game.playerName",{number:a}),class:"input",required:"",maxlength:"20"},null,8,re)),[[B,r.value[a-1]]])),128))])]),e("div",null,[e("label",me,s(t.$t("game.targetSongs")),1),p(e("select",{"onUpdate:modelValue":o[2]||(o[2]=a=>h.value=a),class:"select"},[e("option",ue,"5 "+s(t.$t("game.songs")),1),e("option",de,"6 "+s(t.$t("game.songs")),1),e("option",ce,"7 "+s(t.$t("game.songs")),1),e("option",ge,"8 "+s(t.$t("game.songs")),1),e("option",pe,"9 "+s(t.$t("game.songs")),1),e("option",he,"10 "+s(t.$t("game.songs"))+" ("+s(t.$t("game.default"))+")",1)],512),[[f,h.value]])]),e("div",null,[e("label",ve,s(t.$t("game.theme")),1),p(e("select",{"onUpdate:modelValue":o[3]||(o[3]=a=>v.value=a),class:"select"},[e("option",ye,s(t.$t("game.allMusic")),1),e("option",fe,s(t.$t("game.themes.90s")),1),e("option",be,s(t.$t("game.themes.guilty-pleasures")),1),e("option",_e,s(t.$t("game.themes.schlager")),1),e("option",$e,s(t.$t("game.themes.tiktok")),1),e("option",ke,s(t.$t("game.themes.rock")),1),e("option",Se,s(t.$t("game.themes.pop")),1),e("option",we,s(t.$t("game.themes.hip-hop")),1),e("option",xe,s(t.$t("game.themes.electronic")),1),e("option",Ge,s(t.$t("game.themes.indie")),1),e("option",Ne,s(t.$t("game.themes.country")),1)],512),[[f,v.value]])]),e("button",{type:"submit",disabled:!_.value,class:"btn btn-primary btn-lg w-full"}," 🎮 "+s(t.$t("common.start")),9,Ve)],32)):y("",!0)])])])]))}});export{Ue as default};
