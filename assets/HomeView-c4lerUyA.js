import{d as G,u as j,r as d,c as v,o as R,s as h,w,a as l,b as t,t as a,e as p,f as U,g as A,h as b,v as _,F as L,i as q,j as B,k as n,l as D}from"./index-CIjN7mQT.js";const E={class:"min-h-screen bg-gradient-to-br from-slate-950 via-purple-950 to-slate-900 text-white p-8"},I={class:"p-4 flex justify-between items-center"},F={class:"flex items-center space-x-2"},J={class:"text-3xl font-bold text-white"},O={class:"text-white/80 text-sm"},W={class:"flex-1 container mx-auto px-4 py-8"},Y={class:"max-w-2xl mx-auto"},z={key:0,class:"card mb-6 bounce-in"},H={class:"text-2xl font-bold mb-4 text-white"},K={class:"flex justify-between items-center"},Q={class:"text-slate-300 font-medium"},X={class:"text-slate-300 font-medium"},Z={class:"card"},ee={class:"text-3xl font-bold mb-8 text-white bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent"},te={key:0,class:"mb-8 p-6 bg-gradient-to-r from-green-900/40 to-emerald-900/40 border border-green-500/30 rounded-2xl backdrop-blur-sm"},se={class:"flex items-center space-x-4 mb-4"},ae={class:"font-bold text-xl text-white"},oe={class:"text-white font-medium"},le=["disabled"],ne={key:0,class:"flex items-center justify-center"},ie={key:1,class:"flex items-center justify-center"},re={key:1,class:"mb-4 p-4 bg-blue-900/40 border border-blue-500/30 rounded-lg"},ue={key:0,class:"text-sm text-white/80 mt-2"},de={class:"block text-sm font-bold text-slate-200 mb-3"},me={class:"block text-sm font-bold text-slate-200 mb-3"},ce={class:"space-y-3"},pe=["onUpdate:modelValue","placeholder"],ge={class:"block text-sm font-bold text-slate-200 mb-3"},ve={value:"5"},he={value:"6"},be={value:"7"},fe={value:"8"},ye={value:"9"},_e={value:"10"},$e={class:"block text-sm font-bold text-slate-200 mb-3"},ke={value:""},we={value:"guilty-pleasures"},xe={value:"belgian"},Se={value:"classics"},Ve={value:"popular"},Ne={value:"vlaams"},Pe={value:"pop-rock"},Te=["disabled"],Ge=G({__name:"HomeView",setup(Ce){const $=B(),m=j(),i=d(2),r=d(["","","",""]),f=d(10),y=d(""),g=d(!1),c=d(!1),u=d(""),x=v(()=>m.players.length>0&&m.gamePhase!=="setup"),S=v(()=>m.players.map(e=>e.name)),V=v(()=>m.round),k=v(()=>{var e;if(!c.value)return!1;for(let s=0;s<i.value;s++)if(!((e=r.value[s])!=null&&e.trim()))return!1;return!0});async function N(){g.value=!0;try{await h.initiateLogin()}catch(e){console.error("Login failed:",e)}finally{g.value=!1}}function P(){if(!k.value)return;const e=r.value.slice(0,i.value).map(s=>s.trim());m.updateSettings({targetSongs:f.value,theme:y.value||void 0,maxRounds:20,targetScore:10}),m.initializePlayers(e),$.push("/game")}function T(){$.push("/game")}async function C(){u.value="Testing...";try{console.log("Testing Spotify playback on mobile...");const e=h.isPlayerReady();u.value=`Player ready: ${e}`,e?(await h.startPlayback("spotify:track:4iV5W9uYEdYUVa79Axb7Rh"),u.value="Playback started successfully!"):u.value="Player not ready - check console for details"}catch(e){console.error("Test failed:",e),u.value=`Test failed: ${e.message}`}}return R(()=>{c.value=h.isAuthenticated();const e=localStorage.getItem("hitster-player-names");if(e)try{const s=JSON.parse(e);Array.isArray(s)&&(r.value=[...s,"","","",""].slice(0,4),i.value=Math.max(2,Math.min(4,s.length)))}catch(s){console.error("Error loading saved player names:",s)}}),w(i,e=>{const s=[...r.value];for(;s.length<4;)s.push("");r.value=s},{immediate:!0}),w([r,i],()=>{const e=r.value.slice(0,i.value).filter(s=>s.trim());e.length>0&&localStorage.setItem("hitster-player-names",JSON.stringify(e))},{deep:!0}),(e,s)=>(n(),l("div",E,[t("header",I,[t("div",F,[t("h1",J,a(e.$t("game.title")),1),t("span",O,a(e.$t("game.subtitle")),1)]),t("button",{onClick:s[0]||(s[0]=o=>e.$router.push("/settings")),class:"btn btn-secondary"}," ⚙️ "+a(e.$t("settings.language")),1)]),t("main",W,[t("div",Y,[x.value?(n(),l("div",z,[t("h2",H,a(e.$t("game.continue")),1),t("div",K,[t("div",null,[t("p",Q,a(e.$t("game.players"))+": "+a(S.value.join(", ")),1),t("p",X,a(e.$t("game.round"))+": "+a(V.value),1)]),t("button",{onClick:T,class:"btn btn-primary"},a(e.$t("common.continue")),1)])])):p("",!0),t("div",Z,[t("h2",ee,a(e.$t("game.newGame")),1),c.value?p("",!0):(n(),l("div",te,[t("div",se,[s[4]||(s[4]=t("div",{class:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center"},[t("span",{class:"text-2xl"},"🎵")],-1)),t("div",null,[t("h3",ae,a(e.$t("game.spotify.required")),1),t("p",oe,a(e.$t("game.spotify.loginRequired")),1)])]),t("button",{onClick:N,disabled:g.value,class:"btn bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white w-full font-bold text-lg py-4 shadow-lg hover:shadow-green-500/25"},[g.value?(n(),l("span",ne,[s[5]||(s[5]=t("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"},null,-1)),U(" "+a(e.$t("common.loading")),1)])):(n(),l("span",ie," 🎵 "+a(e.$t("game.spotify.login")),1))],8,le)])),c.value?(n(),l("div",re,[s[6]||(s[6]=t("h3",{class:"text-white font-bold mb-2"},"🔧 Mobile Debug Test",-1)),t("button",{onClick:C,class:"btn btn-secondary"}," Test Spotify Web Playback "),u.value?(n(),l("p",ue,a(u.value),1)):p("",!0)])):p("",!0),c.value?(n(),l("form",{key:2,onSubmit:A(P,["prevent"]),class:"space-y-6"},[t("div",null,[t("label",de,a(e.$t("game.playerCount")),1),b(t("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>i.value=o),class:"select"},s[7]||(s[7]=[t("option",{value:2},"2",-1),t("option",{value:3},"3",-1),t("option",{value:4},"4",-1)]),512),[[_,i.value,void 0,{number:!0}]])]),t("div",null,[t("label",me,a(e.$t("game.playerNames")),1),t("div",ce,[(n(!0),l(L,null,q(i.value,o=>b((n(),l("input",{key:`player-${o}`,"onUpdate:modelValue":M=>r.value[o-1]=M,placeholder:e.$t("game.playerName",{number:o}),class:"input",required:"",maxlength:"20"},null,8,pe)),[[D,r.value[o-1]]])),128))])]),t("div",null,[t("label",ge,a(e.$t("game.targetSongs")),1),b(t("select",{"onUpdate:modelValue":s[2]||(s[2]=o=>f.value=o),class:"select"},[t("option",ve,"5 "+a(e.$t("game.songs")),1),t("option",he,"6 "+a(e.$t("game.songs")),1),t("option",be,"7 "+a(e.$t("game.songs")),1),t("option",fe,"8 "+a(e.$t("game.songs")),1),t("option",ye,"9 "+a(e.$t("game.songs")),1),t("option",_e,"10 "+a(e.$t("game.songs"))+" ("+a(e.$t("game.default"))+")",1)],512),[[_,f.value]])]),t("div",null,[t("label",$e,a(e.$t("game.theme")),1),b(t("select",{"onUpdate:modelValue":s[3]||(s[3]=o=>y.value=o),class:"select"},[t("option",ke,a(e.$t("game.allMusic")),1),t("option",we,a(e.$t("game.themes.guilty-pleasures")),1),t("option",xe,a(e.$t("game.themes.belgian")),1),t("option",Se,a(e.$t("game.themes.classics")),1),t("option",Ve,a(e.$t("game.themes.popular")),1),t("option",Ne,a(e.$t("game.themes.vlaams")),1),t("option",Pe,a(e.$t("game.themes.pop-rock")),1)],512),[[_,y.value]])]),t("button",{type:"submit",disabled:!k.value,class:"btn btn-primary btn-lg w-full"}," 🎮 "+a(e.$t("common.start")),9,Te)],32)):p("",!0)])])])]))}});export{Ge as default};
