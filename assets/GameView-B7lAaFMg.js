import{d as I,l as K,r as x,c as h,o as G,m as Q,a as o,b as e,e as g,t,n as O,p as M,j as n,w as W,f as _,F as N,h as E,u as Y,i as Z,q as U}from"./index-CMWWNC-F.js";const ee={class:"card"},te={class:"flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-6"},se={class:"flex-shrink-0"},ae=["src","alt"],le={class:"flex-1 text-center md:text-left"},ne={key:0,class:"mb-4"},oe={class:"text-gray-600"},re={class:"text-sm text-gray-500"},ie={key:1,class:"mb-4"},ue={class:"text-xl font-bold text-gray-800"},ce={class:"text-lg text-gray-600"},de={class:"text-sm text-gray-500"},ve={key:2,class:"mb-4"},me={class:"text-xl font-bold text-gray-800"},ge={class:"text-lg text-gray-600"},pe={class:"text-gray-600"},fe={class:"text-sm text-gray-500"},he={class:"mb-4"},ye={key:0,class:"bg-gray-100 border border-gray-300 rounded-lg p-4 text-center"},be={class:"text-gray-600"},ke={class:"text-sm text-gray-500"},$e=["src"],_e={key:2,class:"music-player-controls bg-gray-900 rounded-lg p-4"},xe={class:"flex items-center justify-center space-x-6 mb-4"},we=["disabled"],Te=["disabled"],Pe={key:0,class:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"},Ce={key:1,class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20"},Me={key:2,class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20"},De=["disabled"],Ae={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},Le={key:1,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},Be={key:2,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},ze={class:"mb-3"},Se={class:"flex items-center space-x-3 text-xs text-gray-300"},je={class:"w-12 text-right"},He={class:"flex-1 relative"},Ve={class:"w-12"},Ne={class:"flex items-center space-x-3"},Ee={class:"flex-1 relative"},Fe=["value","disabled"],Ie={class:"text-xs text-gray-400 w-8"},Re={key:3,class:"p-4 bg-blue-50 border border-blue-200 rounded-lg"},Oe={class:"text-center"},Ue={class:"text-lg font-bold text-blue-800"},Ge={class:"text-blue-700"},qe={class:"text-blue-600"},Je={class:"text-sm text-blue-500 mt-2"},Xe=["href"],Ke={key:0,class:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},Qe={class:"text-center font-medium text-yellow-800"},We={class:"text-center text-sm text-yellow-700 mt-1"},Ye={class:"font-bold text-lg"},Ze={key:0,class:"text-sm mt-1"},et=I({__name:"TrackPlayer",props:{track:{},difficulty:{},showAnswer:{type:Boolean,default:!1},showResult:{type:Boolean,default:!1},isCorrect:{type:Boolean,default:!1},pointsEarned:{default:0}},emits:["placeTrack"],setup(B,{emit:L}){const i=B,{t:w}=K(),u=x(),c=x(!1),y=x(!1),p=x(!1),D=x(0),P=x(0),$=x(.7),f=x(!1),A=h(()=>{var k,F,V,R;const l=(F=(k=i.track.images)==null?void 0:k[0])==null?void 0:F.url,v=(R=(V=i.track.album.images)==null?void 0:V[0])==null?void 0:R.url;return l||v||"https://via.placeholder.com/300x300/6B7280/FFFFFF?text=No+Image"}),C=h(()=>i.track.artists.map(l=>l.name).join(", ")),a=h(()=>i.showResult?i.isCorrect?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800":""),r=h(()=>i.showResult?i.isCorrect?w("game.turn.correct",{year:i.track.year}):w("game.turn.incorrect",{year:i.track.year}):""),s=h(()=>P.value===0?0:D.value/P.value*100);function d(){!u.value||!p.value||(c.value?u.value.pause():u.value.play())}function b(){!u.value||!p.value||(u.value.currentTime=0,c.value&&u.value.play())}function z(){u.value&&(f.value?(u.value.volume=$.value,f.value=!1):(u.value.volume=0,f.value=!0))}function S(l){if(!u.value)return;const v=l.target,k=parseFloat(v.value);$.value=k,u.value.volume=k,k===0?f.value=!0:f.value&&(f.value=!1)}function j(l){if(!u.value||!p.value)return;const k=l.currentTarget.getBoundingClientRect(),V=(l.clientX-k.left)/k.width*P.value;u.value.currentTime=V}function m(l){if(isNaN(l))return"0:00";const v=Math.floor(l/60),k=Math.floor(l%60);return`${v}:${k.toString().padStart(2,"0")}`}function T(){u.value&&(D.value=u.value.currentTime)}function H(){u.value&&(P.value=u.value.duration,u.value.volume=$.value)}function q(){y.value=!0,p.value=!1}function J(){y.value=!1,p.value=!0}function X(){c.value=!1}return G(()=>{u.value&&(u.value.addEventListener("play",()=>{c.value=!0}),u.value.addEventListener("pause",()=>{c.value=!1}))}),Q(()=>{u.value&&u.value.pause()}),(l,v)=>(n(),o("div",ee,[e("div",te,[e("div",se,[e("img",{src:A.value,alt:l.track.name,class:"w-32 h-32 rounded-lg shadow-lg object-cover"},null,8,ae)]),e("div",le,[l.difficulty==="original"?(n(),o("div",ne,[e("p",oe,t(l.$t("game.turn.listening")),1),e("p",re,t(l.$t("game.difficulties.originalHint")),1)])):l.difficulty==="pro"?(n(),o("div",ie,[e("h3",ue,t(l.track.name),1),e("p",ce,t(C.value),1),e("p",de,t(l.$t("game.difficulties.proHint")),1)])):l.difficulty==="expert"?(n(),o("div",ve,[e("h3",me,t(l.track.name),1),e("p",ge,t(C.value),1),e("p",pe,t(l.track.album.name),1),e("p",fe,t(l.$t("game.difficulties.expertHint")),1)])):g("",!0),e("div",he,[l.track.preview_url?g("",!0):(n(),o("div",ye,[e("p",be,"🎵 "+t(l.$t("game.demoMode")),1),e("p",ke,t(l.$t("game.noPreview")),1)])),l.track.preview_url?(n(),o("audio",{key:1,ref_key:"audioPlayer",ref:u,src:l.track.preview_url,onEnded:X,onTimeupdate:T,onLoadedmetadata:H,onLoadstart:q,onCanplay:J,preload:"metadata"},t(l.$t("game.audioNotSupported")),41,$e)):g("",!0),l.track.preview_url?(n(),o("div",_e,[e("div",xe,[e("button",{onClick:b,class:"control-btn",disabled:!p.value,title:"Restart"},v[1]||(v[1]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1)]),8,we),e("button",{onClick:d,class:"play-btn",disabled:!p.value},[y.value?(n(),o("div",Pe)):c.value?(n(),o("svg",Ce,v[2]||(v[2]=[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(n(),o("svg",Me,v[3]||(v[3]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"},null,-1)])))],8,Te),e("button",{onClick:z,class:"control-btn",disabled:!p.value,title:"Mute/Unmute"},[f.value||$.value===0?(n(),o("svg",Ae,v[4]||(v[4]=[e("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.83 13.6H2a1 1 0 01-1-1V7.4a1 1 0 011-1h2.83l3.553-3.193a1 1 0 011.617.793zM16 8.4A1 1 0 1117.6 7a4 4 0 010 6 1 1 0 11-1.6-1.2 2 2 0 000-3.6z","clip-rule":"evenodd"},null,-1),e("path",{d:"M18.293 6.293a1 1 0 011.414 1.414L17.414 10l2.293 2.293a1 1 0 01-1.414 1.414L16 11.414l-2.293 2.293a1 1 0 01-1.414-1.414L14.586 10l-2.293-2.293a1 1 0 011.414-1.414L16 8.586l2.293-2.293z"},null,-1)]))):$.value<.5?(n(),o("svg",Le,v[5]||(v[5]=[e("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.83 13.6H2a1 1 0 01-1-1V7.4a1 1 0 011-1h2.83l3.553-3.193a1 1 0 011.617.793zM15 8.4A1 1 0 1116.6 7a2 2 0 010 6 1 1 0 11-1.6-1.2V8.4z","clip-rule":"evenodd"},null,-1)]))):(n(),o("svg",Be,v[6]||(v[6]=[e("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.83 13.6H2a1 1 0 01-1-1V7.4a1 1 0 011-1h2.83l3.553-3.193a1 1 0 011.617.793zM15 8.4A1 1 0 1116.6 7a4 4 0 010 6 1 1 0 11-1.6-1.2 2 2 0 000-3.6z","clip-rule":"evenodd"},null,-1)])))],8,De)]),e("div",ze,[e("div",Se,[e("span",je,t(m(D.value)),1),e("div",He,[e("div",{class:"progress-track",onClick:v[0]||(v[0]=k=>j(k))},[e("div",{class:"progress-fill",style:O({width:s.value+"%"})},null,4),e("div",{class:"progress-handle",style:O({left:s.value+"%"})},null,4)])]),e("span",Ve,t(m(P.value)),1)])]),e("div",Ne,[v[7]||(v[7]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.83 13.6H2a1 1 0 01-1-1V7.4a1 1 0 011-1h2.83l3.553-3.193a1 1 0 011.617.793z","clip-rule":"evenodd"})],-1)),e("div",Ee,[e("input",{type:"range",min:"0",max:"1",step:"0.1",value:$.value,onInput:S,class:"volume-slider",disabled:!p.value},null,40,Fe)]),e("span",Ie,t(Math.round($.value*100))+"%",1)])])):g("",!0)]),l.showAnswer?(n(),o("div",Re,[e("div",Oe,[e("h4",Ue,t(l.track.name),1),e("p",Ge,t(C.value),1),e("p",qe,t(l.track.album.name)+" ("+t(l.track.year)+")",1),e("p",Je,[e("a",{href:l.track.external_urls.spotify,target:"_blank",rel:"noopener noreferrer",class:"underline hover:no-underline"},t(l.$t("game.openInSpotify"))+" ↗ ",9,Xe)])])])):g("",!0)])]),l.showAnswer?g("",!0):(n(),o("div",Ke,[e("p",Qe,t(l.$t("game.turn.placing")),1),e("p",We,t(l.$t("game.dragToTimeline")),1)])),l.showResult?(n(),o("div",{key:1,class:M(["mt-4 p-4 rounded-lg text-center",a.value])},[e("p",Ye,t(r.value),1),l.pointsEarned>0?(n(),o("p",Ze,t(l.$t("game.turn.points",{points:l.pointsEarned})),1)):g("",!0)],2)):g("",!0)]))}}),tt={class:"flex items-center justify-between mb-4"},st={class:"text-lg font-semibold flex items-center space-x-2"},at={key:0,class:"text-green-500"},lt={class:"text-right"},nt={class:"text-2xl font-bold"},ot={class:"flex items-center space-x-2 text-sm text-gray-600"},rt={key:0,class:"mb-4"},it={class:"text-sm font-medium text-gray-700 mb-2"},ut={class:"flex space-x-2"},ct=["title"],dt=["title"],vt={class:"mb-4"},mt={class:"text-sm font-medium text-gray-700 mb-2"},gt={key:0,class:"text-center py-8 text-gray-500"},pt={class:"text-center text-gray-500"},ft={key:1,class:"space-y-2"},ht={class:"text-center text-gray-500 text-sm"},yt={class:"flex items-center space-x-3"},bt=["src","alt"],kt={class:"flex-1 min-w-0"},$t={class:"font-medium truncate"},_t={class:"text-sm text-gray-600 truncate"},xt={class:"text-right flex-shrink-0"},wt={class:"font-bold text-lg"},Tt=["onDragover","onDragleave","onDrop"],Pt={class:"text-center text-gray-500 text-sm"},Ct={class:"text-center text-gray-500 text-sm"},Mt={class:"flex items-center space-x-3"},Dt=["src","alt"],At={class:"flex-1 min-w-0"},Lt={class:"font-medium text-blue-800"},Bt={class:"text-sm text-blue-600"},zt={key:2,class:"mt-4 pt-4 border-t border-gray-200"},St={class:"flex justify-between text-sm text-gray-600"},jt={key:0},Ht=I({__name:"PlayerTimeline",props:{player:{},isCurrent:{type:Boolean},currentTrack:{},canPlace:{type:Boolean}},emits:["placeTrack","useToken"],setup(B,{emit:L}){const i=B,w=L,u=x(!1),c=x([]),y=h(()=>{if(i.player.timeline.length<2)return null;const a=i.player.timeline.map(r=>r.year).sort((r,s)=>r-s);return`${a[0]} - ${a[a.length-1]}`});function p(a){var r,s,d,b;return((s=(r=a.images)==null?void 0:r[0])==null?void 0:s.url)||((b=(d=a.album.images)==null?void 0:d[0])==null?void 0:b.url)||"/placeholder-album.png"}function D(a){return a.artists.map(r=>r.name).join(", ")}function P(a){var s;if(!i.currentTrack)return;(s=a.dataTransfer)==null||s.setData("text/plain",JSON.stringify(i.currentTrack)),a.target.classList.add("dragging")}function $(a){a.target.classList.remove("dragging"),u.value=!1,c.value=[]}function f(a){!i.currentTrack||!i.canPlace||(u.value=!1,c.value=[],w("placeTrack",i.currentTrack,a))}function A(a){w("useToken",a)}function C(){c.value=new Array(i.player.timeline.length+1).fill(!1)}return W(()=>i.player.timeline.length,()=>{C()},{immediate:!0}),(a,r)=>(n(),o("div",{class:M(["card",{"ring-2 ring-green-500":a.isCurrent}])},[e("div",tt,[e("h3",st,[e("span",null,t(a.player.name),1),a.isCurrent?(n(),o("span",at,"👑")):g("",!0)]),e("div",lt,[e("p",nt,t(a.player.score),1),e("div",ot,[r[11]||(r[11]=e("span",null,"🎵",-1)),e("span",null,t(a.$t("game.score.tokens",{count:a.player.tokens})),1)])])]),a.isCurrent&&a.canPlace&&a.player.tokens>0?(n(),o("div",rt,[e("h4",it,t(a.$t("game.tokenAbilities")),1),e("div",ut,[e("button",{onClick:r[0]||(r[0]=s=>A("skip")),class:"btn btn-sm bg-yellow-100 hover:bg-yellow-200 text-yellow-800",title:a.$t("game.tokens.skip.description")}," ⏭️ "+t(a.$t("game.tokens.skip.label")),9,ct),e("button",{onClick:r[1]||(r[1]=s=>A("hint")),class:"btn btn-sm bg-blue-100 hover:bg-blue-200 text-blue-800",title:a.$t("game.tokens.hint.description")}," 💡 "+t(a.$t("game.tokens.hint.label")),9,dt)])])):g("",!0),e("div",vt,[e("h4",mt,t(a.$t("game.timeline.title")),1),a.player.timeline.length===0?(n(),o("div",gt,[e("p",null,t(a.$t("game.timeline.empty")),1),a.canPlace?(n(),o("div",{key:0,class:M(["timeline-slot mt-4",{"drag-over":u.value}]),onDragover:r[2]||(r[2]=_(s=>u.value=!0,["prevent"])),onDragleave:r[3]||(r[3]=_(s=>u.value=!1,["prevent"])),onDrop:r[4]||(r[4]=_(s=>f(0),["prevent"]))},[e("p",pt,t(a.$t("game.timeline.placeHere")),1)],34)):g("",!0)])):(n(),o("div",ft,[a.canPlace?(n(),o("div",{key:0,class:M(["timeline-slot h-16",{"drag-over":c.value[0]}]),onDragover:r[5]||(r[5]=_(s=>c.value[0]=!0,["prevent"])),onDragleave:r[6]||(r[6]=_(s=>c.value[0]=!1,["prevent"])),onDrop:r[7]||(r[7]=_(s=>f(0),["prevent"]))},[e("p",ht,t(a.$t("game.placeEarlier")),1)],34)):g("",!0),(n(!0),o(N,null,E(a.player.timeline,(s,d)=>(n(),o("div",{key:s.id,class:"track-card"},[e("div",yt,[e("img",{src:p(s),alt:s.name,class:"w-12 h-12 rounded object-cover flex-shrink-0"},null,8,bt),e("div",kt,[e("p",$t,t(s.name),1),e("p",_t,t(D(s)),1)]),e("div",xt,[e("p",wt,t(s.year),1)])]),a.canPlace&&d<a.player.timeline.length-1?(n(),o("div",{key:0,class:M(["timeline-slot h-16 mt-2",{"drag-over":c.value[d+1]}]),onDragover:_(b=>c.value[d+1]=!0,["prevent"]),onDragleave:_(b=>c.value[d+1]=!1,["prevent"]),onDrop:_(b=>f(d+1),["prevent"])},[e("p",Pt,t(a.$t("game.placeBetween")),1)],42,Tt)):g("",!0)]))),128)),a.canPlace?(n(),o("div",{key:1,class:M(["timeline-slot h-16",{"drag-over":c.value[a.player.timeline.length]}]),onDragover:r[8]||(r[8]=_(s=>c.value[a.player.timeline.length]=!0,["prevent"])),onDragleave:r[9]||(r[9]=_(s=>c.value[a.player.timeline.length]=!1,["prevent"])),onDrop:r[10]||(r[10]=_(s=>f(a.player.timeline.length),["prevent"]))},[e("p",Ct,t(a.$t("game.placeLater")),1)],34)):g("",!0)]))]),a.canPlace&&a.currentTrack?(n(),o("div",{key:1,class:"p-4 bg-blue-50 border-2 border-blue-200 rounded-lg cursor-move",draggable:"true",onDragstart:P,onDragend:$},[e("div",Mt,[e("img",{src:p(a.currentTrack),alt:a.currentTrack.name,class:"w-12 h-12 rounded object-cover flex-shrink-0"},null,8,Dt),e("div",At,[e("p",Lt,t(a.$t("game.newTrack")),1),e("p",Bt,t(a.$t("game.dragToPlace")),1)]),r[12]||(r[12]=e("div",{class:"text-blue-500"},[e("span",{class:"text-2xl"},"🎵")],-1))])],32)):g("",!0),a.player.timeline.length>0?(n(),o("div",zt,[e("div",St,[e("span",null,t(a.$t("game.tracksInTimeline",{count:a.player.timeline.length})),1),y.value?(n(),o("span",jt,t(y.value),1)):g("",!0)])])):g("",!0)],2))}}),Vt={class:"min-h-screen flex flex-col"},Nt={class:"bg-white/10 backdrop-blur-sm p-4"},Et={class:"flex justify-between items-center"},Ft={class:"flex items-center space-x-4"},It={class:"text-white"},Rt={class:"text-xl font-bold"},Ot={class:"text-sm opacity-80"},Ut={class:"text-white text-right"},Gt={class:"text-sm opacity-80"},qt={class:"flex-1 container mx-auto px-4 py-6"},Jt={key:0,class:"max-w-2xl mx-auto"},Xt={class:"card text-center"},Kt={class:"text-2xl font-semibold mb-4"},Qt={class:"text-gray-600 mb-6"},Wt={key:1,class:"space-y-6"},Yt={class:"card text-center bg-green-50 border-green-200"},Zt={class:"text-2xl font-bold text-green-800 mb-2"},es={class:"text-green-700"},ts={key:0,class:"mt-4"},ss={key:1,class:"mt-4"},as={class:"flex items-center justify-center space-x-2"},ls={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ns={class:"card"},os={class:"text-lg font-semibold mb-4"},rs={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},is={class:"font-semibold"},us={class:"text-2xl font-bold text-green-600"},cs={class:"text-sm text-gray-600"},ds={class:"text-xs text-gray-500"},vs={key:2,class:"max-w-2xl mx-auto"},ms={class:"card text-center"},gs={class:"text-3xl font-bold mb-4 text-green-600"},ps={class:"text-xl mb-6"},fs={class:"mb-6"},hs={class:"text-lg font-semibold mb-3"},ys={class:"space-y-2"},bs={class:"font-medium"},ks={class:"font-bold"},$s={class:"flex space-x-4 justify-center"},xs=I({__name:"GameView",setup(B){const L=Z(),i=Y(),w=x(!1),u=h(()=>i.players),c=h(()=>i.currentPlayer),y=h(()=>i.currentTrack),p=h(()=>i.gamePhase),D=h(()=>i.round),P=h(()=>i.settings),$=h(()=>i.winner),f=h(()=>[...u.value].sort((s,d)=>d.tokens!==s.tokens?d.tokens-s.tokens:d.score-s.score));async function A(){w.value=!0;try{await i.getNextTrack()||console.error("No tracks available")}catch(s){console.error("Error loading track:",s)}finally{w.value=!1}}function C(s,d){i.placeTrackOnTimeline(s,d),setTimeout(()=>{i.nextPlayer()},2e3)}function a(s){var b;if(!c.value)return;if(i.useToken(c.value.id,s))switch(s){case"skip":A();break;case"hint":alert(`Hint: This track was released in the ${Math.floor(((b=y.value)==null?void 0:b.year)/10)*10}s`);break}}function r(){i.resetGame(),L.push("/")}return G(()=>{i.gamePhase==="setup"&&i.players.length===0&&L.push("/")}),(s,d)=>{var b,z,S,j;return n(),o("div",Vt,[e("header",Nt,[e("div",Et,[e("div",Ft,[e("button",{onClick:d[0]||(d[0]=m=>s.$router.push("/")),class:"btn btn-secondary"}," ← "+t(s.$t("common.back")),1),e("div",It,[e("h1",Rt,t(s.$t("game.title")),1),e("p",Ot,t(s.$t("game.round"))+" "+t(D.value),1)])]),e("div",Ut,[e("p",Gt,t(s.$t("game.turn.currentPlayer",{player:(b=c.value)==null?void 0:b.name})),1)])])]),e("main",qt,[p.value==="setup"?(n(),o("div",Jt,[e("div",Xt,[e("h2",Kt,t(s.$t("game.setupRequired")),1),e("p",Qt,t(s.$t("game.setupMessage")),1),e("button",{onClick:d[1]||(d[1]=m=>s.$router.push("/")),class:"btn btn-primary"},t(s.$t("game.backToSetup")),1)])])):p.value==="playing"?(n(),o("div",Wt,[e("div",Yt,[e("h2",Zt,t(s.$t("game.turn.currentPlayer",{player:(z=c.value)==null?void 0:z.name})),1),e("p",es,t(s.$t("game.turn.ready")),1),!y.value&&!w.value?(n(),o("div",ts,[e("button",{onClick:A,class:"btn btn-primary btn-lg"}," 🎵 "+t(s.$t("game.getTrack")),1)])):g("",!0),w.value?(n(),o("div",ss,[e("div",as,[d[3]||(d[3]=e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-green-500"},null,-1)),e("span",null,t(s.$t("common.loading")),1)])])):g("",!0)]),y.value?(n(),U(et,{key:0,track:y.value,difficulty:P.value.difficulty,onPlaceTrack:C},null,8,["track","difficulty"])):g("",!0),e("div",ls,[(n(!0),o(N,null,E(u.value,m=>{var T,H;return n(),U(Ht,{key:m.id,player:m,"is-current":m.id===((T=c.value)==null?void 0:T.id),"current-track":y.value,"can-place":m.id===((H=c.value)==null?void 0:H.id)&&!!y.value,onPlaceTrack:C,onUseToken:a},null,8,["player","is-current","current-track","can-place"])}),128))]),e("div",ns,[e("h3",os,t(s.$t("game.score.title")),1),e("div",rs,[(n(!0),o(N,null,E(u.value,m=>{var T;return n(),o("div",{key:m.id,class:M(["text-center p-3 rounded-lg",m.id===((T=c.value)==null?void 0:T.id)?"bg-green-100":"bg-gray-50"])},[e("p",is,t(m.name),1),e("p",us,t(m.tokens),1),e("p",cs,t(s.$t("game.score.tokens",{count:m.tokens})),1),e("p",ds,t(s.$t("game.score.total",{score:m.score})),1)],2)}),128))])])])):p.value==="finished"?(n(),o("div",vs,[e("div",ms,[e("h2",gs,t(s.$t("game.end.title")),1),e("p",ps,t(s.$t("game.end.winner",{player:(S=$.value)==null?void 0:S.name,score:(j=$.value)==null?void 0:j.tokens})),1),e("div",fs,[e("h3",hs,t(s.$t("game.end.finalScores")),1),e("div",ys,[(n(!0),o(N,null,E(f.value,(m,T)=>(n(),o("div",{key:m.id,class:M(["flex justify-between items-center p-3 rounded-lg",T===0?"bg-yellow-100":"bg-gray-50"])},[e("span",bs,t(T+1)+". "+t(m.name),1),e("span",ks,t(m.tokens)+" "+t(s.$t("game.score.tokens",{count:m.tokens})),1)],2))),128))])]),e("div",$s,[e("button",{onClick:r,class:"btn btn-primary"}," 🔄 "+t(s.$t("game.end.playAgain")),1),e("button",{onClick:d[2]||(d[2]=m=>s.$router.push("/")),class:"btn btn-secondary"}," 🏠 "+t(s.$t("game.backToHome")),1)])])])):g("",!0)])])}}});export{xs as default};
