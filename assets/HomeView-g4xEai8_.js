import{d as I,u as N,r as c,c as M,o as V,s as d,a as C,w as v,b as u,e,t as o,f as $,g as b,h as R,i as h,v as x,F as L,j as P,k as m,l as T,m as U}from"./index-D9Ni7pe4.js";const z="/Hipster/hipster.png",E={class:"min-h-screen bg-gradient-to-br from-slate-950 via-purple-950 to-slate-900 text-white p-8"},G={class:"p-4 flex justify-between items-center"},q={class:"flex items-center space-x-2"},B={class:"text-3xl font-bold text-white"},D={class:"text-white/80 text-sm"},F={class:"flex-1 container mx-auto px-4 py-8"},H={class:"max-w-2xl mx-auto"},J={class:"card mb-8"},O={class:"text-center mb-8"},K={class:"text-3xl font-bold mb-4 text-white bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent"},Q={class:"bg-gradient-to-r from-slate-800/50 to-purple-900/50 border border-purple-500/20 rounded-xl p-6 backdrop-blur-sm"},W={class:"text-xl font-bold text-white mb-4 flex items-center justify-center"},X={class:"space-y-3 text-left"},Y={class:"flex items-start space-x-3"},Z={class:"text-white font-medium"},ee={class:"flex items-start space-x-3"},te={class:"text-white font-medium"},se={class:"flex items-start space-x-3"},oe={class:"text-white font-medium"},ae={class:"flex items-start space-x-3"},le={class:"text-white font-medium"},ne={class:"card"},ie={class:"text-3xl font-bold mb-8 text-white bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent"},re={key:0,class:"mb-8 p-6 bg-gradient-to-r from-green-900/40 to-emerald-900/40 border border-green-500/30 rounded-2xl backdrop-blur-sm"},de={class:"flex items-center space-x-4 mb-4"},ue={class:"font-bold text-xl text-white"},me={class:"text-white font-medium"},ce=["disabled"],pe={key:0,class:"flex items-center justify-center"},ge={key:1,class:"flex items-center justify-center"},he={key:0,class:"mt-4 p-3 bg-gray-800 rounded-lg text-sm",style:{display:"none"}},fe={class:"text-gray-300"},ve={class:"block text-sm font-bold text-slate-200 mb-3"},be={class:"block text-sm font-bold text-slate-200 mb-3"},xe={class:"space-y-3"},ye=["onUpdate:modelValue","placeholder"],_e={class:"block text-sm font-bold text-slate-200 mb-3"},we={value:"5"},$e={value:"6"},ke={value:"7"},Se={value:"8"},Ae={value:"9"},je={value:"10"},Ie={class:"block text-sm font-bold text-slate-200 mb-3"},Ne={value:""},Me={value:"guilty-pleasures"},Ve={value:"belgian"},Ce={value:"classics"},Re={value:"popular"},Le={value:"vlaams"},Pe={value:"pop-rock"},Te=["disabled"],Ee=I({__name:"HomeView",setup(Ue){const k=T(),y=N(),i=c(2),r=c(["","","",""]),p=c(10),f=c(""),g=c(!1),n=c(!1),_=c("Auth state will be checked..."),w=M(()=>{var t;if(!n.value)return!1;for(let s=0;s<i.value;s++)if(!((t=r.value[s])!=null&&t.trim()))return!1;return!0});function S(){n.value=d.isAuthenticated()}async function A(){g.value=!0;try{await d.initiateLogin()}catch(t){console.error("Login failed:",t)}finally{g.value=!1}}function j(){if(!w.value)return;const t=r.value.slice(0,i.value).map(s=>s.trim());y.updateSettings({targetSongs:p.value,theme:f.value||void 0,maxRounds:20,targetScore:10}),y.initializePlayers(t),k.push("/game")}return V(()=>{n.value=d.isAuthenticated(),n.value&&d.initializePlayerIfReady();const t=localStorage.getItem("hitster-player-names");if(t)try{const a=JSON.parse(t);Array.isArray(a)&&(r.value=[...a,"","","",""].slice(0,4),i.value=Math.max(2,Math.min(4,a.length)))}catch(a){console.error("Error loading saved player names:",a)}const s=setInterval(()=>{const a=d.isAuthenticated();a!==n.value&&(n.value=a,a&&(d.initializePlayerIfReady(),clearInterval(s)))},500);setTimeout(()=>{clearInterval(s)},1e4);const l=()=>{const a=d.isAuthenticated();a!==n.value&&(n.value=a,a&&d.initializePlayerIfReady())};window.addEventListener("focus",l),C(()=>{window.removeEventListener("focus",l),clearInterval(s)})}),v(n,t=>{t&&d.initializePlayerIfReady()},{immediate:!0}),v(i,t=>{const s=[...r.value];for(;s.length<4;)s.push("");r.value=s},{immediate:!0}),v([r,i],()=>{const t=r.value.slice(0,i.value).filter(s=>s.trim());t.length>0&&localStorage.setItem("hitster-player-names",JSON.stringify(t))},{deep:!0}),(t,s)=>(m(),u("div",E,[e("header",G,[e("div",q,[e("h1",B,o(t.$t("game.title")),1),e("span",D,o(t.$t("game.subtitle")),1)]),e("button",{onClick:s[0]||(s[0]=l=>t.$router.push("/settings")),class:"btn btn-secondary"}," ⚙️ "+o(t.$t("settings.language")),1)]),e("main",F,[e("div",H,[e("div",J,[s[9]||(s[9]=e("div",{class:"text-center mb-6"},[e("img",{src:z,alt:"Hipster Music Game",class:"w-48 h-48 mx-auto rounded-2xl shadow-xl object-cover border border-purple-500/20",onerror:"this.style.display='none'; this.nextElementSibling.style.display='flex'"}),e("div",{class:"w-48 h-48 mx-auto rounded-2xl bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center shadow-xl border border-purple-500/20",style:{display:"none"}},[e("span",{class:"text-6xl"},"🎵")])],-1)),e("div",O,[e("h2",K,o(t.$t("game.introduction")),1),e("div",Q,[e("h3",W,[s[4]||(s[4]=e("span",{class:"mr-2"},"🎯",-1)),$(" "+o(t.$t("game.howToPlay")),1)]),e("div",X,[e("div",Y,[s[5]||(s[5]=e("span",{class:"bg-purple-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5"},"1",-1)),e("p",Z,o(t.$t("game.rules.step1")),1)]),e("div",ee,[s[6]||(s[6]=e("span",{class:"bg-purple-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5"},"2",-1)),e("p",te,o(t.$t("game.rules.step2")),1)]),e("div",se,[s[7]||(s[7]=e("span",{class:"bg-purple-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5"},"3",-1)),e("p",oe,o(t.$t("game.rules.step3")),1)]),e("div",ae,[s[8]||(s[8]=e("span",{class:"bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5"},"🏆",-1)),e("p",le,o(t.$t("game.rules.step4",{target:p.value})),1)])])])])]),e("div",ne,[e("h2",ie,o(t.$t("game.newGame")),1),n.value?b("",!0):(m(),u("div",re,[e("div",de,[s[10]||(s[10]=e("div",{class:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center"},[e("span",{class:"text-2xl"},"🎵")],-1)),e("div",null,[e("h3",ue,o(t.$t("game.spotify.required")),1),e("p",me,o(t.$t("game.spotify.loginRequired")),1)])]),e("button",{onClick:A,disabled:g.value,class:"btn bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white w-full font-bold text-lg py-4 shadow-lg hover:shadow-green-500/25"},[g.value?(m(),u("span",pe,[s[11]||(s[11]=e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"},null,-1)),$(" "+o(t.$t("common.loading")),1)])):(m(),u("span",ge," 🎵 "+o(t.$t("game.spotify.login")),1))],8,ce),_.value?(m(),u("div",he,[e("p",fe,"Debug: "+o(_.value),1),e("button",{onClick:S,class:"mt-2 text-xs bg-blue-600 hover:bg-blue-700 px-2 py-1 rounded"}," Refresh Auth State ")])):b("",!0)])),n.value?(m(),u("form",{key:1,onSubmit:R(j,["prevent"]),class:"space-y-6"},[e("div",null,[e("label",ve,o(t.$t("game.playerCount")),1),h(e("select",{"onUpdate:modelValue":s[1]||(s[1]=l=>i.value=l),class:"select"},s[12]||(s[12]=[e("option",{value:2},"2",-1),e("option",{value:3},"3",-1),e("option",{value:4},"4",-1)]),512),[[x,i.value,void 0,{number:!0}]])]),e("div",null,[e("label",be,o(t.$t("game.playerNames")),1),e("div",xe,[(m(!0),u(L,null,P(i.value,l=>h((m(),u("input",{key:`player-${l}`,"onUpdate:modelValue":a=>r.value[l-1]=a,placeholder:t.$t("game.playerName",{number:l}),class:"input",required:"",maxlength:"20"},null,8,ye)),[[U,r.value[l-1]]])),128))])]),e("div",null,[e("label",_e,o(t.$t("game.targetSongs")),1),h(e("select",{"onUpdate:modelValue":s[2]||(s[2]=l=>p.value=l),class:"select"},[e("option",we,"5 "+o(t.$t("game.songs")),1),e("option",$e,"6 "+o(t.$t("game.songs")),1),e("option",ke,"7 "+o(t.$t("game.songs")),1),e("option",Se,"8 "+o(t.$t("game.songs")),1),e("option",Ae,"9 "+o(t.$t("game.songs")),1),e("option",je,"10 "+o(t.$t("game.songs"))+" ("+o(t.$t("game.default"))+")",1)],512),[[x,p.value]])]),e("div",null,[e("label",Ie,o(t.$t("game.theme")),1),h(e("select",{"onUpdate:modelValue":s[3]||(s[3]=l=>f.value=l),class:"select"},[e("option",Ne,o(t.$t("game.allMusic")),1),e("option",Me,o(t.$t("game.themes.guilty-pleasures")),1),e("option",Ve,o(t.$t("game.themes.belgian")),1),e("option",Ce,o(t.$t("game.themes.classics")),1),e("option",Re,o(t.$t("game.themes.popular")),1),e("option",Le,o(t.$t("game.themes.vlaams")),1),e("option",Pe,o(t.$t("game.themes.pop-rock")),1)],512),[[x,f.value]])]),e("button",{type:"submit",disabled:!w.value,class:"btn btn-primary btn-lg w-full"}," 🎮 "+o(t.$t("common.start")),9,Te)],32)):b("",!0)])])])]))}});export{Ee as default};
