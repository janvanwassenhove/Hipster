import{d as G,u as j,r as m,c as b,o as A,s as u,w as k,a as l,b as t,t as a,e as g,f as R,g as U,h,v as _,F as D,i as L,j as q,k as n,l as B}from"./index-BwKLQOtQ.js";const E={class:"min-h-screen bg-gradient-to-br from-slate-950 via-purple-950 to-slate-900 text-white p-8"},I={class:"p-4 flex justify-between items-center"},F={class:"flex items-center space-x-2"},J={class:"text-3xl font-bold text-white"},O={class:"text-white/80 text-sm"},W={class:"flex-1 container mx-auto px-4 py-8"},Y={class:"max-w-2xl mx-auto"},z={key:0,class:"card mb-6 bounce-in"},H={class:"text-2xl font-bold mb-4 text-white"},K={class:"flex justify-between items-center"},Q={class:"text-slate-300 font-medium"},X={class:"text-slate-300 font-medium"},Z={class:"card"},ee={class:"text-3xl font-bold mb-8 text-white bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent"},te={key:0,class:"mb-8 p-6 bg-gradient-to-r from-green-900/40 to-emerald-900/40 border border-green-500/30 rounded-2xl backdrop-blur-sm"},se={class:"flex items-center space-x-4 mb-4"},ae={class:"font-bold text-xl text-white"},oe={class:"text-white font-medium"},le=["disabled"],ne={key:0,class:"flex items-center justify-center"},ie={key:1,class:"flex items-center justify-center"},re={key:1,class:"mb-4 p-4 bg-blue-900/40 border border-blue-500/30 rounded-lg"},ue={key:0,class:"text-sm text-white/80 mt-2"},de={class:"block text-sm font-bold text-slate-200 mb-3"},me={class:"block text-sm font-bold text-slate-200 mb-3"},ce={class:"space-y-3"},pe=["onUpdate:modelValue","placeholder"],ge={class:"block text-sm font-bold text-slate-200 mb-3"},ve={value:"5"},be={value:"6"},he={value:"7"},fe={value:"8"},ye={value:"9"},_e={value:"10"},$e={class:"block text-sm font-bold text-slate-200 mb-3"},we={value:""},ke={value:"guilty-pleasures"},xe={value:"belgian"},Se={value:"classics"},Ve={value:"popular"},Ce={value:"vlaams"},Ne={value:"pop-rock"},Pe=["disabled"],Ge=G({__name:"HomeView",setup(Te){const $=q(),c=j(),i=m(2),r=m(["","","",""]),f=m(10),y=m(""),v=m(!1),p=m(!1),d=m(""),x=b(()=>c.players.length>0&&c.gamePhase!=="setup"),S=b(()=>c.players.map(e=>e.name)),V=b(()=>c.round),w=b(()=>{var e;if(!p.value)return!1;for(let s=0;s<i.value;s++)if(!((e=r.value[s])!=null&&e.trim()))return!1;return!0});async function C(){v.value=!0;try{await u.initiateLogin()}catch(e){console.error("Login failed:",e)}finally{v.value=!1}}function N(){if(!w.value)return;const e=r.value.slice(0,i.value).map(s=>s.trim());c.updateSettings({targetSongs:f.value,theme:y.value||void 0,maxRounds:20,targetScore:10}),c.initializePlayers(e),$.push("/game")}function P(){$.push("/game")}async function T(){d.value="Testing...";try{if(console.log("Testing Spotify playback on mobile..."),u.player){const s=await u.player.getVolume();console.log("Current player volume:",s),s===0&&(console.log("Volume is 0, setting to 50%..."),await u.player.setVolume(.5))}const e=u.isPlayerReady();if(d.value=`Player ready: ${e}`,e){await u.startPlayback("spotify:track:4iV5W9uYEdYUVa79Axb7Rh"),d.value="Playback started successfully!";const s=await u.getAvailableDevices();console.log("Available devices after playback:",s)}else d.value="Player not ready"}catch(e){console.error("Test failed:",e),d.value=`Test failed: ${e.message}`}}return A(()=>{p.value=u.isAuthenticated();const e=localStorage.getItem("hitster-player-names");if(e)try{const s=JSON.parse(e);Array.isArray(s)&&(r.value=[...s,"","","",""].slice(0,4),i.value=Math.max(2,Math.min(4,s.length)))}catch(s){console.error("Error loading saved player names:",s)}}),k(i,e=>{const s=[...r.value];for(;s.length<4;)s.push("");r.value=s},{immediate:!0}),k([r,i],()=>{const e=r.value.slice(0,i.value).filter(s=>s.trim());e.length>0&&localStorage.setItem("hitster-player-names",JSON.stringify(e))},{deep:!0}),(e,s)=>(n(),l("div",E,[t("header",I,[t("div",F,[t("h1",J,a(e.$t("game.title")),1),t("span",O,a(e.$t("game.subtitle")),1)]),t("button",{onClick:s[0]||(s[0]=o=>e.$router.push("/settings")),class:"btn btn-secondary"}," ⚙️ "+a(e.$t("settings.language")),1)]),t("main",W,[t("div",Y,[x.value?(n(),l("div",z,[t("h2",H,a(e.$t("game.continue")),1),t("div",K,[t("div",null,[t("p",Q,a(e.$t("game.players"))+": "+a(S.value.join(", ")),1),t("p",X,a(e.$t("game.round"))+": "+a(V.value),1)]),t("button",{onClick:P,class:"btn btn-primary"},a(e.$t("common.continue")),1)])])):g("",!0),t("div",Z,[t("h2",ee,a(e.$t("game.newGame")),1),p.value?g("",!0):(n(),l("div",te,[t("div",se,[s[4]||(s[4]=t("div",{class:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center"},[t("span",{class:"text-2xl"},"🎵")],-1)),t("div",null,[t("h3",ae,a(e.$t("game.spotify.required")),1),t("p",oe,a(e.$t("game.spotify.loginRequired")),1)])]),t("button",{onClick:C,disabled:v.value,class:"btn bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white w-full font-bold text-lg py-4 shadow-lg hover:shadow-green-500/25"},[v.value?(n(),l("span",ne,[s[5]||(s[5]=t("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"},null,-1)),R(" "+a(e.$t("common.loading")),1)])):(n(),l("span",ie," 🎵 "+a(e.$t("game.spotify.login")),1))],8,le)])),p.value?(n(),l("div",re,[s[6]||(s[6]=t("h3",{class:"text-white font-bold mb-2"},"🔧 Mobile Debug Test",-1)),t("button",{onClick:T,class:"btn btn-secondary"}," Test Spotify Web Playback "),d.value?(n(),l("p",ue,a(d.value),1)):g("",!0)])):g("",!0),p.value?(n(),l("form",{key:2,onSubmit:U(N,["prevent"]),class:"space-y-6"},[t("div",null,[t("label",de,a(e.$t("game.playerCount")),1),h(t("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>i.value=o),class:"select"},s[7]||(s[7]=[t("option",{value:2},"2",-1),t("option",{value:3},"3",-1),t("option",{value:4},"4",-1)]),512),[[_,i.value,void 0,{number:!0}]])]),t("div",null,[t("label",me,a(e.$t("game.playerNames")),1),t("div",ce,[(n(!0),l(D,null,L(i.value,o=>h((n(),l("input",{key:`player-${o}`,"onUpdate:modelValue":M=>r.value[o-1]=M,placeholder:e.$t("game.playerName",{number:o}),class:"input",required:"",maxlength:"20"},null,8,pe)),[[B,r.value[o-1]]])),128))])]),t("div",null,[t("label",ge,a(e.$t("game.targetSongs")),1),h(t("select",{"onUpdate:modelValue":s[2]||(s[2]=o=>f.value=o),class:"select"},[t("option",ve,"5 "+a(e.$t("game.songs")),1),t("option",be,"6 "+a(e.$t("game.songs")),1),t("option",he,"7 "+a(e.$t("game.songs")),1),t("option",fe,"8 "+a(e.$t("game.songs")),1),t("option",ye,"9 "+a(e.$t("game.songs")),1),t("option",_e,"10 "+a(e.$t("game.songs"))+" ("+a(e.$t("game.default"))+")",1)],512),[[_,f.value]])]),t("div",null,[t("label",$e,a(e.$t("game.theme")),1),h(t("select",{"onUpdate:modelValue":s[3]||(s[3]=o=>y.value=o),class:"select"},[t("option",we,a(e.$t("game.allMusic")),1),t("option",ke,a(e.$t("game.themes.guilty-pleasures")),1),t("option",xe,a(e.$t("game.themes.belgian")),1),t("option",Se,a(e.$t("game.themes.classics")),1),t("option",Ve,a(e.$t("game.themes.popular")),1),t("option",Ce,a(e.$t("game.themes.vlaams")),1),t("option",Ne,a(e.$t("game.themes.pop-rock")),1)],512),[[_,y.value]])]),t("button",{type:"submit",disabled:!w.value,class:"btn btn-primary btn-lg w-full"}," 🎮 "+a(e.$t("common.start")),9,Pe)],32)):g("",!0)])])])]))}});export{Ge as default};
